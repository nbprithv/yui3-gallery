YUI.add("gallery-itsaselectlist",function(e,t){"use strict";var n=e.Lang,r=e.Node,i=e.UA.ie,s="itsa-hidden",o="Selectlist Shim",u='<iframe frameborder="0" tabindex="-1" class="itsa-shim" title="'+o+'" src="javascript:false;"></iframe>',a="<span class='itsa-selectlist-selectedmain' unselectable='on'></span>",f="<button class='yui3-button'></button>",l="<span class='itsa-button-icon itsa-icon-selectdown'></span>",c="<div class='itsa-selectlist-basediv "+s+"'><div class='itsa-selectlist-scrolldiv'><ul class='itsa-selectlist-ullist'></ul></div></div>";e.ITSASelectList=e.Base.create("itsaselectlist",e.Widget,[],{buttonNode:null,_selectedMainItemNode:null,_selectedItemClass:null,_itemsContainerNode:null,_itemValues:null,_syncWithinSetterItems:!1,_eventhandlers:[],initializer:function(e){var t=this;t._selectedItemClass=t.get("hideSelected")?s:"itsa-selectlist-selected"},renderUI:function(){var t=this,n=t.get("boundingBox"),r=t.get("className"),s=t.get("iconClassName"),o=t.get("buttonWidth"),u=t.get("listWidth"),h=t.get("btnSize"),p;i>0&&i<7&&n.append(t.SHIM_TEMPLATE),t.buttonNode=e.Node.create(f),n.append(t.buttonNode),t.buttonNode.setHTML(l),t._selectedMainItemNode=e.Node.create(a),t.buttonNode.append(t._selectedMainItemNode),t._itemsContainerNode=e.Node.create(c),t.get("listAlignLeft")?n.addClass("itsa-leftalign"):n.addClass("itsa-rightalign"),r&&n.addClass(r),s&&(t._selectedMainItemNode.addClass("itsa-button-icon"),t._selectedMainItemNode.addClass(s)),o&&t.buttonNode.setStyle("minWidth",o+"px"),u&&t._itemsContainerNode.setStyle("width",u+"px"),h===1?n.addClass("itsa-buttonsize-small"):h===2&&n.addClass("itsa-buttonsize-medium"),n.append(t._itemsContainerNode)},bindUI:function(){var e=this,t=e.get("boundingBox");e._eventhandlers.push(t.on("click",e._toggleListbox,e)),e._eventhandlers.push(t.on("clickoutside",e.hideListbox,e)),e._eventhandlers.push(e._itemsContainerNode.delegate("click",e._itemClick,"li",e)),e._eventhandlers.push(e.on("disabledChange",e._disabledChange,e))},syncUI:function(){var t=this,r=t.get("items"),i=t.get("defaultItem"),s=t._itemsContainerNode.one(".itsa-selectlist-ullist"),o,u,a,f,l,c;s.setHTML("");if(r.length>0){for(o=0;o<r.length;o++)u=r[o],a=n.isString(u)?u:u.text||"",f=a===i,f&&(l=!0),c=e.Node.create("<li"+(f?' class="'+t._selectedItemClass+'"':"")+">"+a+"</li>"),u.returnValue&&c.setData("returnValue",u.returnValue),s.append(c);t._selectedMainItemNode.setHTML(t.get("selectionOnButton")&&l?i:t.get("defaultButtonText"))}t._syncWithinSetterItems=!0},_itemClick:function(e){this._selectItem(e.currentTarget,!0)},selectItem:function(e,t,n){var r=this,i=r._itemsContainerNode.all("li");r.get("disabled")||(e>=0&&e<i.size()?r._selectItem(i.item(e)):t&&(i.removeClass(r._selectedItemClass),r.get("selectionOnButton")&&r._selectedMainItemNode.setHTML(n||r.get("defaultButtonText"))))},selectItemByValue:function(t,n,r){var i=this,s=e.Array.indexOf(i._itemValues,t.toString().toLowerCase());i.selectItem(s,n,r?i.get("defaultButtonText"):t)},_selectItem:function(e,t){var n=this,r=n._itemsContainerNode.one("li."+n._selectedItemClass),i;!n.get("disabled")&&e&&e!==r&&(r&&r.removeClass(n._selectedItemClass),e.addClass(n._selectedItemClass),i=e.getHTML(),n.get("selectionOnButton")&&n._selectedMainItemNode.setHTML(i),n.fire("valueChange",{element:e,value:e.getData("returnValue")||i,index:n._indexOf(e)}),t&&n.fire("selectChange",{element:e,value:e.getData("returnValue")||i,index:n._indexOf(e)}))},hideListbox:function(){var e=this;e.get("disabled")||(e.fire("hide"),e._itemsContainerNode.toggleClass(s,!0))},showListbox:function(){var e=this;e.get("disabled")||(e.fire("show"),e._itemsContainerNode.toggleClass(s,!1))},_toggleListbox:function(){var e=this;e._itemsContainerNode.hasClass(s)?e.showListbox():e.hideListbox()},currentSelected:function(){return this._itemsContainerNode.one("li."+this._selectedItemClass)},currentIndex:function(){return this._indexOf(this.currentSelected())},_indexOf:function(e){var t=this._itemsContainerNode.one(".itsa-selectlist-ullist").all("li");return t.indexOf(e)},_disabledChange:function(e){var t=this;t.buttonNode.toggleClass("yui3-button-disabled",e.newVal),t.hideListbox()},_clearMemory:function(){var t=this;e.Array.each(t._eventhandlers,function(e,t,n){e.detach()})},destructor:function(){this._clearMemory()}},{ATTRS:{btnSize:{value:3,validator:function(e){return n.isNumber(e)&&e>0&&e<4}},defaultButtonText:{value:"choose...",validator:function(t){return e.Lang.isString(t)}},buttonWidth:{value:null,validator:function(t){return e.Lang.isNumber(t)&&t>=0}},listWidth:{value:null,validator:function(t){return e.Lang.isNumber(t)&&t>=0}},listAlignLeft:{value:!0,validator:function(t){return e.Lang.isBoolean(t)}},className:{value:null,validator:function(t){return e.Lang.isString(t)}},iconClassName:{value:null,validator:function(t){return e.Lang.isString(t)}},items:{value:[],validator:function(t){return e.Lang.isArray(t)},setter:function(e){var t=this,n,r;t._itemValues=[];for(r=0;r<e.length;r++)n=e[r],t._itemValues.push(n.returnValue?n.returnValue.toString().toLowerCase():n.toString().toLowerCase());return this._syncWithinSetterItems&&this.syncUI(),e}},defaultItem:{value:null,validator:function(t){return e.Lang.isString(t)}},selectionOnButton:{value:!0,validator:function(t){return e.Lang.isBoolean(t)}},hideSelected:{value:!1,validator:function(t){return e.Lang.isBoolean(t)},setter:function(e){var t=this;return t._selectedItemClass=e?s:"itsa-selectlist-selected",e}}},HTML_PARSER:{defaultItem:function(e){var t=e.all("option"),n=null;return t.each(function(e,t,r){!n&&e.getAttribute("selected")==="selected"&&(n=e.getHTML())}),n},items:function(e){var t=e.all("option"),n=[];return t.each(function(e,t,r){n.push({text:e.getHTML(),returnValue:e.getAttribute("value")||e.getHTML()})}),n}}})},"gallery-2012.12.05-21-01",{supersedes:[""],skinnable:"true",requires:["base-build","widget","node-base","cssbutton","event-base","node-event-delegate","event-outside"],optional:[""]});
