if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-querybuilder/gallery-querybuilder.js']) {
   __coverage__['build/gallery-querybuilder/gallery-querybuilder.js'] = {"path":"build/gallery-querybuilder/gallery-querybuilder.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":51}}},"2":{"name":"QueryBuilder","line":75,"loc":{"start":{"line":75,"column":0},"end":{"line":79,"column":0}}},"3":{"name":"initVarList","line":164,"loc":{"start":{"line":164,"column":0},"end":{"line":165,"column":0}}},"4":{"name":"findRow","line":174,"loc":{"start":{"line":174,"column":0},"end":{"line":177,"column":0}}},"5":{"name":"insertRow","line":190,"loc":{"start":{"line":190,"column":0},"end":{"line":193,"column":0}}},"6":{"name":"removeRow","line":198,"loc":{"start":{"line":198,"column":0},"end":{"line":201,"column":0}}},"7":{"name":"changeVar","line":211,"loc":{"start":{"line":211,"column":0},"end":{"line":214,"column":0}}},"8":{"name":"keyUp","line":222,"loc":{"start":{"line":222,"column":0},"end":{"line":223,"column":0}}},"9":{"name":"(anonymous_9)","line":232,"loc":{"start":{"line":232,"column":14},"end":{"line":233,"column":1}}},"10":{"name":"(anonymous_10)","line":242,"loc":{"start":{"line":242,"column":11},"end":{"line":243,"column":1}}},"11":{"name":"(anonymous_11)","line":254,"loc":{"start":{"line":254,"column":13},"end":{"line":255,"column":1}}},"12":{"name":"(anonymous_12)","line":275,"loc":{"start":{"line":275,"column":8},"end":{"line":278,"column":1}}},"13":{"name":"(anonymous_13)","line":312,"loc":{"start":{"line":312,"column":12},"end":{"line":315,"column":1}}},"14":{"name":"(anonymous_14)","line":436,"loc":{"start":{"line":436,"column":9},"end":{"line":439,"column":1}}},"15":{"name":"(anonymous_15)","line":532,"loc":{"start":{"line":532,"column":9},"end":{"line":534,"column":1}}},"16":{"name":"(anonymous_16)","line":571,"loc":{"start":{"line":571,"column":30},"end":{"line":572,"column":2}}},"17":{"name":"(anonymous_17)","line":594,"loc":{"start":{"line":594,"column":17},"end":{"line":595,"column":1}}},"18":{"name":"(anonymous_18)","line":599,"loc":{"start":{"line":599,"column":30},"end":{"line":600,"column":2}}},"19":{"name":"(anonymous_19)","line":602,"loc":{"start":{"line":602,"column":29},"end":{"line":603,"column":3}}},"20":{"name":"(anonymous_20)","line":628,"loc":{"start":{"line":628,"column":21},"end":{"line":629,"column":1}}},"21":{"name":"(anonymous_21)","line":632,"loc":{"start":{"line":632,"column":43},"end":{"line":633,"column":2}}},"22":{"name":"(anonymous_22)","line":637,"loc":{"start":{"line":637,"column":44},"end":{"line":638,"column":2}}},"23":{"name":"(anonymous_23)","line":653,"loc":{"start":{"line":653,"column":22},"end":{"line":658,"column":1}}},"24":{"name":"(anonymous_24)","line":677,"loc":{"start":{"line":677,"column":12},"end":{"line":679,"column":1}}},"25":{"name":"(anonymous_25)","line":687,"loc":{"start":{"line":687,"column":18},"end":{"line":688,"column":1}}},"26":{"name":"(anonymous_26)","line":717,"loc":{"start":{"line":717,"column":19},"end":{"line":718,"column":1}}},"27":{"name":"(anonymous_27)","line":728,"loc":{"start":{"line":728,"column":17},"end":{"line":729,"column":1}}},"28":{"name":"(anonymous_28)","line":742,"loc":{"start":{"line":742,"column":15},"end":{"line":744,"column":1}}},"29":{"name":"(anonymous_29)","line":758,"loc":{"start":{"line":758,"column":17},"end":{"line":760,"column":1}}},"30":{"name":"(anonymous_30)","line":778,"loc":{"start":{"line":778,"column":15},"end":{"line":779,"column":1}}},"31":{"name":"(anonymous_31)","line":841,"loc":{"start":{"line":841,"column":22},"end":{"line":844,"column":0}}},"32":{"name":"(anonymous_32)","line":853,"loc":{"start":{"line":853,"column":9},"end":{"line":858,"column":1}}},"33":{"name":"(anonymous_33)","line":890,"loc":{"start":{"line":890,"column":13},"end":{"line":895,"column":1}}},"34":{"name":"(anonymous_34)","line":896,"loc":{"start":{"line":896,"column":24},"end":{"line":897,"column":2}}},"35":{"name":"(anonymous_35)","line":924,"loc":{"start":{"line":924,"column":10},"end":{"line":925,"column":1}}},"36":{"name":"(anonymous_36)","line":935,"loc":{"start":{"line":935,"column":13},"end":{"line":937,"column":1}}},"37":{"name":"(anonymous_37)","line":942,"loc":{"start":{"line":942,"column":6},"end":{"line":945,"column":1}}},"38":{"name":"(anonymous_38)","line":950,"loc":{"start":{"line":950,"column":18},"end":{"line":951,"column":1}}},"39":{"name":"(anonymous_39)","line":959,"loc":{"start":{"line":959,"column":16},"end":{"line":961,"column":1}}},"40":{"name":"(anonymous_40)","line":965,"loc":{"start":{"line":965,"column":12},"end":{"line":967,"column":1}}},"41":{"name":"(anonymous_41)","line":975,"loc":{"start":{"line":975,"column":18},"end":{"line":977,"column":1}}},"42":{"name":"(anonymous_42)","line":990,"loc":{"start":{"line":990,"column":14},"end":{"line":993,"column":1}}},"43":{"name":"(anonymous_43)","line":1026,"loc":{"start":{"line":1026,"column":22},"end":{"line":1029,"column":0}}},"44":{"name":"(anonymous_44)","line":1037,"loc":{"start":{"line":1037,"column":9},"end":{"line":1042,"column":1}}},"45":{"name":"(anonymous_45)","line":1070,"loc":{"start":{"line":1070,"column":13},"end":{"line":1075,"column":1}}},"46":{"name":"(anonymous_46)","line":1086,"loc":{"start":{"line":1086,"column":10},"end":{"line":1087,"column":1}}},"47":{"name":"(anonymous_47)","line":1091,"loc":{"start":{"line":1091,"column":13},"end":{"line":1093,"column":1}}},"48":{"name":"(anonymous_48)","line":1097,"loc":{"start":{"line":1097,"column":6},"end":{"line":1100,"column":1}}},"49":{"name":"(anonymous_49)","line":1104,"loc":{"start":{"line":1104,"column":18},"end":{"line":1105,"column":1}}},"50":{"name":"(anonymous_50)","line":1113,"loc":{"start":{"line":1113,"column":12},"end":{"line":1115,"column":1}}},"51":{"name":"(anonymous_51)","line":1123,"loc":{"start":{"line":1123,"column":14},"end":{"line":1125,"column":1}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1181,"column":3}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":13}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":54}},"4":{"start":{"line":75,"column":0},"end":{"line":105,"column":1}},"5":{"start":{"line":80,"column":1},"end":{"line":89,"column":2}},"6":{"start":{"line":82,"column":2},"end":{"line":88,"column":4}},"7":{"start":{"line":93,"column":1},"end":{"line":93,"column":35}},"8":{"start":{"line":97,"column":1},"end":{"line":97,"column":46}},"9":{"start":{"line":98,"column":1},"end":{"line":98,"column":24}},"10":{"start":{"line":102,"column":1},"end":{"line":102,"column":20}},"11":{"start":{"line":104,"column":1},"end":{"line":104,"column":56}},"12":{"start":{"line":107,"column":0},"end":{"line":107,"column":35}},"13":{"start":{"line":109,"column":0},"end":{"line":156,"column":2}},"14":{"start":{"line":164,"column":0},"end":{"line":172,"column":1}},"15":{"start":{"line":166,"column":1},"end":{"line":171,"column":4}},"16":{"start":{"line":174,"column":0},"end":{"line":188,"column":1}},"17":{"start":{"line":178,"column":1},"end":{"line":178,"column":29}},"18":{"start":{"line":179,"column":1},"end":{"line":185,"column":2}},"19":{"start":{"line":181,"column":2},"end":{"line":184,"column":3}},"20":{"start":{"line":183,"column":3},"end":{"line":183,"column":12}},"21":{"start":{"line":187,"column":1},"end":{"line":187,"column":11}},"22":{"start":{"line":190,"column":0},"end":{"line":196,"column":1}},"23":{"start":{"line":194,"column":1},"end":{"line":194,"column":10}},"24":{"start":{"line":195,"column":1},"end":{"line":195,"column":18}},"25":{"start":{"line":198,"column":0},"end":{"line":209,"column":1}},"26":{"start":{"line":202,"column":1},"end":{"line":202,"column":10}},"27":{"start":{"line":204,"column":1},"end":{"line":204,"column":43}},"28":{"start":{"line":205,"column":1},"end":{"line":208,"column":2}},"29":{"start":{"line":207,"column":2},"end":{"line":207,"column":17}},"30":{"start":{"line":211,"column":0},"end":{"line":220,"column":1}},"31":{"start":{"line":215,"column":1},"end":{"line":215,"column":43}},"32":{"start":{"line":216,"column":1},"end":{"line":219,"column":2}},"33":{"start":{"line":218,"column":2},"end":{"line":218,"column":17}},"34":{"start":{"line":222,"column":0},"end":{"line":228,"column":1}},"35":{"start":{"line":224,"column":1},"end":{"line":227,"column":2}},"36":{"start":{"line":226,"column":2},"end":{"line":226,"column":24}},"37":{"start":{"line":230,"column":0},"end":{"line":795,"column":3}},"38":{"start":{"line":234,"column":2},"end":{"line":234,"column":66}},"39":{"start":{"line":235,"column":2},"end":{"line":235,"column":73}},"40":{"start":{"line":236,"column":2},"end":{"line":236,"column":55}},"41":{"start":{"line":237,"column":2},"end":{"line":237,"column":44}},"42":{"start":{"line":239,"column":2},"end":{"line":239,"column":25}},"43":{"start":{"line":244,"column":2},"end":{"line":244,"column":41}},"44":{"start":{"line":245,"column":2},"end":{"line":245,"column":52}},"45":{"start":{"line":246,"column":2},"end":{"line":246,"column":37}},"46":{"start":{"line":248,"column":2},"end":{"line":248,"column":48}},"47":{"start":{"line":249,"column":2},"end":{"line":249,"column":36}},"48":{"start":{"line":251,"column":2},"end":{"line":251,"column":19}},"49":{"start":{"line":256,"column":2},"end":{"line":262,"column":3}},"50":{"start":{"line":258,"column":3},"end":{"line":261,"column":4}},"51":{"start":{"line":260,"column":4},"end":{"line":260,"column":38}},"52":{"start":{"line":264,"column":2},"end":{"line":264,"column":23}},"53":{"start":{"line":265,"column":2},"end":{"line":265,"column":23}},"54":{"start":{"line":279,"column":2},"end":{"line":279,"column":37}},"55":{"start":{"line":281,"column":2},"end":{"line":284,"column":3}},"56":{"start":{"line":283,"column":3},"end":{"line":283,"column":18}},"57":{"start":{"line":286,"column":2},"end":{"line":286,"column":38}},"58":{"start":{"line":288,"column":2},"end":{"line":292,"column":3}},"59":{"start":{"line":290,"column":3},"end":{"line":290,"column":37}},"60":{"start":{"line":291,"column":3},"end":{"line":291,"column":26}},"61":{"start":{"line":294,"column":2},"end":{"line":298,"column":3}},"62":{"start":{"line":296,"column":3},"end":{"line":296,"column":48}},"63":{"start":{"line":297,"column":3},"end":{"line":297,"column":26}},"64":{"start":{"line":300,"column":2},"end":{"line":300,"column":28}},"65":{"start":{"line":301,"column":2},"end":{"line":301,"column":19}},"66":{"start":{"line":318,"column":2},"end":{"line":335,"column":3}},"67":{"start":{"line":320,"column":3},"end":{"line":320,"column":44}},"68":{"start":{"line":321,"column":3},"end":{"line":334,"column":4}},"69":{"start":{"line":323,"column":4},"end":{"line":330,"column":5}},"70":{"start":{"line":325,"column":5},"end":{"line":329,"column":6}},"71":{"start":{"line":327,"column":6},"end":{"line":327,"column":39}},"72":{"start":{"line":328,"column":6},"end":{"line":328,"column":12}},"73":{"start":{"line":332,"column":4},"end":{"line":332,"column":26}},"74":{"start":{"line":333,"column":4},"end":{"line":333,"column":35}},"75":{"start":{"line":339,"column":2},"end":{"line":339,"column":40}},"76":{"start":{"line":340,"column":2},"end":{"line":340,"column":52}},"77":{"start":{"line":341,"column":2},"end":{"line":341,"column":62}},"78":{"start":{"line":345,"column":2},"end":{"line":345,"column":45}},"79":{"start":{"line":346,"column":2},"end":{"line":346,"column":57}},"80":{"start":{"line":347,"column":2},"end":{"line":347,"column":36}},"81":{"start":{"line":349,"column":2},"end":{"line":349,"column":43}},"82":{"start":{"line":350,"column":2},"end":{"line":350,"column":58}},"83":{"start":{"line":351,"column":2},"end":{"line":351,"column":91}},"84":{"start":{"line":352,"column":2},"end":{"line":352,"column":36}},"85":{"start":{"line":354,"column":2},"end":{"line":354,"column":49}},"86":{"start":{"line":358,"column":2},"end":{"line":358,"column":45}},"87":{"start":{"line":359,"column":2},"end":{"line":359,"column":61}},"88":{"start":{"line":360,"column":2},"end":{"line":360,"column":36}},"89":{"start":{"line":364,"column":2},"end":{"line":364,"column":41}},"90":{"start":{"line":365,"column":2},"end":{"line":365,"column":59}},"91":{"start":{"line":366,"column":2},"end":{"line":366,"column":34}},"92":{"start":{"line":370,"column":2},"end":{"line":370,"column":79}},"93":{"start":{"line":372,"column":2},"end":{"line":372,"column":40}},"94":{"start":{"line":373,"column":2},"end":{"line":373,"column":52}},"95":{"start":{"line":375,"column":2},"end":{"line":375,"column":52}},"96":{"start":{"line":376,"column":2},"end":{"line":383,"column":3}},"97":{"start":{"line":378,"column":3},"end":{"line":378,"column":73}},"98":{"start":{"line":379,"column":3},"end":{"line":382,"column":4}},"99":{"start":{"line":381,"column":4},"end":{"line":381,"column":37}},"100":{"start":{"line":385,"column":2},"end":{"line":388,"column":3}},"101":{"start":{"line":387,"column":3},"end":{"line":387,"column":52}},"102":{"start":{"line":392,"column":2},"end":{"line":392,"column":45}},"103":{"start":{"line":393,"column":2},"end":{"line":393,"column":63}},"104":{"start":{"line":394,"column":2},"end":{"line":394,"column":53}},"105":{"start":{"line":395,"column":2},"end":{"line":395,"column":38}},"106":{"start":{"line":397,"column":2},"end":{"line":397,"column":73}},"107":{"start":{"line":398,"column":2},"end":{"line":401,"column":3}},"108":{"start":{"line":400,"column":3},"end":{"line":400,"column":58}},"109":{"start":{"line":403,"column":2},"end":{"line":403,"column":73}},"110":{"start":{"line":404,"column":2},"end":{"line":407,"column":3}},"111":{"start":{"line":406,"column":3},"end":{"line":406,"column":58}},"112":{"start":{"line":411,"column":2},"end":{"line":411,"column":37}},"113":{"start":{"line":413,"column":2},"end":{"line":420,"column":4}},"114":{"start":{"line":421,"column":2},"end":{"line":421,"column":26}},"115":{"start":{"line":422,"column":2},"end":{"line":422,"column":32}},"116":{"start":{"line":424,"column":2},"end":{"line":424,"column":30}},"117":{"start":{"line":426,"column":2},"end":{"line":426,"column":41}},"118":{"start":{"line":440,"column":2},"end":{"line":440,"column":50}},"119":{"start":{"line":441,"column":2},"end":{"line":441,"column":54}},"120":{"start":{"line":445,"column":2},"end":{"line":445,"column":97}},"121":{"start":{"line":449,"column":2},"end":{"line":453,"column":3}},"122":{"start":{"line":451,"column":3},"end":{"line":451,"column":45}},"123":{"start":{"line":452,"column":3},"end":{"line":452,"column":42}},"124":{"start":{"line":455,"column":2},"end":{"line":459,"column":3}},"125":{"start":{"line":457,"column":3},"end":{"line":457,"column":56}},"126":{"start":{"line":458,"column":3},"end":{"line":458,"column":22}},"127":{"start":{"line":463,"column":2},"end":{"line":463,"column":55}},"128":{"start":{"line":464,"column":2},"end":{"line":464,"column":68}},"129":{"start":{"line":466,"column":2},"end":{"line":466,"column":17}},"130":{"start":{"line":467,"column":2},"end":{"line":482,"column":3}},"131":{"start":{"line":469,"column":3},"end":{"line":469,"column":50}},"132":{"start":{"line":473,"column":3},"end":{"line":473,"column":53}},"133":{"start":{"line":475,"column":3},"end":{"line":477,"column":37}},"134":{"start":{"line":478,"column":3},"end":{"line":481,"column":47}},"135":{"start":{"line":484,"column":2},"end":{"line":487,"column":3}},"136":{"start":{"line":486,"column":3},"end":{"line":486,"column":39}},"137":{"start":{"line":489,"column":2},"end":{"line":492,"column":3}},"138":{"start":{"line":491,"column":3},"end":{"line":491,"column":50}},"139":{"start":{"line":494,"column":2},"end":{"line":514,"column":3}},"140":{"start":{"line":496,"column":3},"end":{"line":496,"column":35}},"141":{"start":{"line":497,"column":3},"end":{"line":511,"column":4}},"142":{"start":{"line":499,"column":4},"end":{"line":499,"column":35}},"143":{"start":{"line":500,"column":4},"end":{"line":500,"column":52}},"144":{"start":{"line":502,"column":4},"end":{"line":510,"column":5}},"145":{"start":{"line":504,"column":5},"end":{"line":504,"column":44}},"146":{"start":{"line":506,"column":5},"end":{"line":509,"column":6}},"147":{"start":{"line":508,"column":6},"end":{"line":508,"column":57}},"148":{"start":{"line":513,"column":3},"end":{"line":513,"column":43}},"149":{"start":{"line":516,"column":2},"end":{"line":516,"column":47}},"150":{"start":{"line":517,"column":2},"end":{"line":522,"column":3}},"151":{"start":{"line":519,"column":3},"end":{"line":521,"column":46}},"152":{"start":{"line":537,"column":2},"end":{"line":540,"column":3}},"153":{"start":{"line":539,"column":3},"end":{"line":539,"column":16}},"154":{"start":{"line":544,"column":2},"end":{"line":551,"column":3}},"155":{"start":{"line":546,"column":3},"end":{"line":546,"column":44}},"156":{"start":{"line":547,"column":3},"end":{"line":547,"column":36}},"157":{"start":{"line":548,"column":3},"end":{"line":548,"column":18}},"158":{"start":{"line":549,"column":3},"end":{"line":549,"column":45}},"159":{"start":{"line":550,"column":3},"end":{"line":550,"column":15}},"160":{"start":{"line":553,"column":2},"end":{"line":553,"column":49}},"161":{"start":{"line":554,"column":2},"end":{"line":557,"column":3}},"162":{"start":{"line":556,"column":3},"end":{"line":556,"column":16}},"163":{"start":{"line":561,"column":2},"end":{"line":564,"column":3}},"164":{"start":{"line":563,"column":3},"end":{"line":563,"column":45}},"165":{"start":{"line":566,"column":2},"end":{"line":566,"column":26}},"166":{"start":{"line":567,"column":2},"end":{"line":567,"column":37}},"167":{"start":{"line":571,"column":2},"end":{"line":582,"column":8}},"168":{"start":{"line":573,"column":3},"end":{"line":573,"column":31}},"169":{"start":{"line":574,"column":3},"end":{"line":574,"column":55}},"170":{"start":{"line":576,"column":3},"end":{"line":576,"column":69}},"171":{"start":{"line":577,"column":3},"end":{"line":580,"column":4}},"172":{"start":{"line":579,"column":4},"end":{"line":579,"column":29}},"173":{"start":{"line":584,"column":2},"end":{"line":584,"column":44}},"174":{"start":{"line":585,"column":2},"end":{"line":585,"column":14}},"175":{"start":{"line":596,"column":2},"end":{"line":596,"column":28}},"176":{"start":{"line":598,"column":2},"end":{"line":598,"column":20}},"177":{"start":{"line":599,"column":2},"end":{"line":620,"column":8}},"178":{"start":{"line":601,"column":3},"end":{"line":601,"column":12}},"179":{"start":{"line":602,"column":3},"end":{"line":613,"column":9}},"180":{"start":{"line":604,"column":4},"end":{"line":604,"column":48}},"181":{"start":{"line":606,"column":4},"end":{"line":611,"column":5}},"182":{"start":{"line":608,"column":5},"end":{"line":608,"column":54}},"183":{"start":{"line":609,"column":5},"end":{"line":609,"column":20}},"184":{"start":{"line":610,"column":5},"end":{"line":610,"column":17}},"185":{"start":{"line":615,"column":3},"end":{"line":618,"column":4}},"186":{"start":{"line":617,"column":4},"end":{"line":617,"column":45}},"187":{"start":{"line":622,"column":2},"end":{"line":622,"column":16}},"188":{"start":{"line":630,"column":2},"end":{"line":630,"column":28}},"189":{"start":{"line":632,"column":2},"end":{"line":635,"column":5}},"190":{"start":{"line":634,"column":3},"end":{"line":634,"column":33}},"191":{"start":{"line":637,"column":2},"end":{"line":640,"column":5}},"192":{"start":{"line":639,"column":3},"end":{"line":639,"column":33}},"193":{"start":{"line":659,"column":2},"end":{"line":667,"column":3}},"194":{"start":{"line":661,"column":3},"end":{"line":661,"column":28}},"195":{"start":{"line":662,"column":3},"end":{"line":662,"column":15}},"196":{"start":{"line":666,"column":3},"end":{"line":666,"column":16}},"197":{"start":{"line":680,"column":2},"end":{"line":680,"column":41}},"198":{"start":{"line":689,"column":2},"end":{"line":689,"column":18}},"199":{"start":{"line":691,"column":2},"end":{"line":703,"column":3}},"200":{"start":{"line":693,"column":3},"end":{"line":693,"column":33}},"201":{"start":{"line":694,"column":3},"end":{"line":694,"column":27}},"202":{"start":{"line":695,"column":3},"end":{"line":702,"column":4}},"203":{"start":{"line":697,"column":4},"end":{"line":697,"column":40}},"204":{"start":{"line":698,"column":4},"end":{"line":701,"column":5}},"205":{"start":{"line":700,"column":5},"end":{"line":700,"column":64}},"206":{"start":{"line":705,"column":2},"end":{"line":705,"column":16}},"207":{"start":{"line":719,"column":2},"end":{"line":719,"column":36}},"208":{"start":{"line":730,"column":2},"end":{"line":730,"column":28}},"209":{"start":{"line":745,"column":2},"end":{"line":745,"column":55}},"210":{"start":{"line":763,"column":2},"end":{"line":763,"column":55}},"211":{"start":{"line":765,"column":2},"end":{"line":770,"column":5}},"212":{"start":{"line":780,"column":2},"end":{"line":782,"column":51}},"213":{"start":{"line":784,"column":2},"end":{"line":791,"column":3}},"214":{"start":{"line":786,"column":3},"end":{"line":790,"column":6}},"215":{"start":{"line":793,"column":2},"end":{"line":793,"column":31}},"216":{"start":{"line":797,"column":0},"end":{"line":797,"column":30}},"217":{"start":{"line":811,"column":0},"end":{"line":814,"column":2}},"218":{"start":{"line":841,"column":0},"end":{"line":849,"column":2}},"219":{"start":{"line":845,"column":1},"end":{"line":845,"column":25}},"220":{"start":{"line":847,"column":1},"end":{"line":847,"column":68}},"221":{"start":{"line":848,"column":1},"end":{"line":848,"column":69}},"222":{"start":{"line":851,"column":0},"end":{"line":1005,"column":2}},"223":{"start":{"line":859,"column":2},"end":{"line":859,"column":43}},"224":{"start":{"line":860,"column":2},"end":{"line":860,"column":61}},"225":{"start":{"line":861,"column":2},"end":{"line":861,"column":82}},"226":{"start":{"line":862,"column":2},"end":{"line":862,"column":39}},"227":{"start":{"line":864,"column":2},"end":{"line":864,"column":56}},"228":{"start":{"line":865,"column":2},"end":{"line":868,"column":3}},"229":{"start":{"line":867,"column":3},"end":{"line":867,"column":62}},"230":{"start":{"line":870,"column":2},"end":{"line":870,"column":27}},"231":{"start":{"line":871,"column":2},"end":{"line":874,"column":3}},"232":{"start":{"line":873,"column":3},"end":{"line":873,"column":39}},"233":{"start":{"line":876,"column":2},"end":{"line":879,"column":3}},"234":{"start":{"line":878,"column":3},"end":{"line":878,"column":62}},"235":{"start":{"line":881,"column":2},"end":{"line":881,"column":46}},"236":{"start":{"line":882,"column":2},"end":{"line":882,"column":61}},"237":{"start":{"line":883,"column":2},"end":{"line":883,"column":100}},"238":{"start":{"line":884,"column":2},"end":{"line":884,"column":45}},"239":{"start":{"line":885,"column":2},"end":{"line":885,"column":42}},"240":{"start":{"line":887,"column":2},"end":{"line":887,"column":33}},"241":{"start":{"line":896,"column":2},"end":{"line":921,"column":5}},"242":{"start":{"line":898,"column":3},"end":{"line":920,"column":4}},"243":{"start":{"line":900,"column":4},"end":{"line":910,"column":5}},"244":{"start":{"line":902,"column":5},"end":{"line":902,"column":60}},"245":{"start":{"line":903,"column":5},"end":{"line":903,"column":35}},"246":{"start":{"line":904,"column":5},"end":{"line":904,"column":58}},"247":{"start":{"line":906,"column":5},"end":{"line":909,"column":6}},"248":{"start":{"line":908,"column":6},"end":{"line":908,"column":98}},"249":{"start":{"line":912,"column":4},"end":{"line":919,"column":5}},"250":{"start":{"line":914,"column":5},"end":{"line":914,"column":30}},"251":{"start":{"line":926,"column":2},"end":{"line":929,"column":3}},"252":{"start":{"line":928,"column":3},"end":{"line":928,"column":50}},"253":{"start":{"line":931,"column":2},"end":{"line":931,"column":26}},"254":{"start":{"line":932,"column":2},"end":{"line":932,"column":26}},"255":{"start":{"line":938,"column":2},"end":{"line":938,"column":67}},"256":{"start":{"line":939,"column":2},"end":{"line":939,"column":67}},"257":{"start":{"line":946,"column":2},"end":{"line":946,"column":69}},"258":{"start":{"line":947,"column":2},"end":{"line":947,"column":69}},"259":{"start":{"line":952,"column":2},"end":{"line":952,"column":74}},"260":{"start":{"line":962,"column":2},"end":{"line":962,"column":54}},"261":{"start":{"line":968,"column":2},"end":{"line":968,"column":56}},"262":{"start":{"line":980,"column":2},"end":{"line":980,"column":55}},"263":{"start":{"line":982,"column":2},"end":{"line":987,"column":5}},"264":{"start":{"line":996,"column":2},"end":{"line":996,"column":78}},"265":{"start":{"line":998,"column":2},"end":{"line":1003,"column":5}},"266":{"start":{"line":1026,"column":0},"end":{"line":1033,"column":2}},"267":{"start":{"line":1030,"column":1},"end":{"line":1030,"column":25}},"268":{"start":{"line":1032,"column":1},"end":{"line":1032,"column":69}},"269":{"start":{"line":1035,"column":0},"end":{"line":1137,"column":2}},"270":{"start":{"line":1043,"column":2},"end":{"line":1043,"column":46}},"271":{"start":{"line":1044,"column":2},"end":{"line":1044,"column":61}},"272":{"start":{"line":1045,"column":2},"end":{"line":1045,"column":77}},"273":{"start":{"line":1046,"column":2},"end":{"line":1046,"column":45}},"274":{"start":{"line":1048,"column":2},"end":{"line":1048,"column":62}},"275":{"start":{"line":1049,"column":2},"end":{"line":1049,"column":41}},"276":{"start":{"line":1050,"column":2},"end":{"line":1053,"column":3}},"277":{"start":{"line":1052,"column":3},"end":{"line":1052,"column":68}},"278":{"start":{"line":1055,"column":2},"end":{"line":1058,"column":3}},"279":{"start":{"line":1057,"column":3},"end":{"line":1057,"column":39}},"280":{"start":{"line":1060,"column":2},"end":{"line":1063,"column":3}},"281":{"start":{"line":1062,"column":3},"end":{"line":1062,"column":65}},"282":{"start":{"line":1065,"column":2},"end":{"line":1065,"column":36}},"283":{"start":{"line":1067,"column":2},"end":{"line":1067,"column":24}},"284":{"start":{"line":1076,"column":2},"end":{"line":1083,"column":3}},"285":{"start":{"line":1078,"column":3},"end":{"line":1078,"column":27}},"286":{"start":{"line":1088,"column":2},"end":{"line":1088,"column":25}},"287":{"start":{"line":1094,"column":2},"end":{"line":1094,"column":66}},"288":{"start":{"line":1101,"column":2},"end":{"line":1101,"column":68}},"289":{"start":{"line":1106,"column":2},"end":{"line":1106,"column":68}},"290":{"start":{"line":1116,"column":2},"end":{"line":1116,"column":56}},"291":{"start":{"line":1128,"column":2},"end":{"line":1128,"column":55}},"292":{"start":{"line":1130,"column":2},"end":{"line":1135,"column":5}},"293":{"start":{"line":1163,"column":0},"end":{"line":1168,"column":2}}},"branchMap":{"1":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":26},"end":{"line":5,"column":37}},{"start":{"line":5,"column":41},"end":{"line":5,"column":52}}]},"2":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},{"start":{"line":80,"column":1},"end":{"line":80,"column":1}}]},"3":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":2},"end":{"line":181,"column":2}},{"start":{"line":181,"column":2},"end":{"line":181,"column":2}}]},"4":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},{"start":{"line":205,"column":1},"end":{"line":205,"column":1}}]},"5":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},{"start":{"line":216,"column":1},"end":{"line":216,"column":1}}]},"6":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},{"start":{"line":224,"column":1},"end":{"line":224,"column":1}}]},"7":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":3},"end":{"line":258,"column":3}},{"start":{"line":258,"column":3},"end":{"line":258,"column":3}}]},"8":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":2},"end":{"line":288,"column":2}},{"start":{"line":288,"column":2},"end":{"line":288,"column":2}}]},"9":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":2},"end":{"line":294,"column":2}},{"start":{"line":294,"column":2},"end":{"line":294,"column":2}}]},"10":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":2},"end":{"line":318,"column":2}},{"start":{"line":318,"column":2},"end":{"line":318,"column":2}}]},"11":{"line":318,"type":"binary-expr","locations":[{"start":{"line":318,"column":6},"end":{"line":318,"column":10}},{"start":{"line":318,"column":14},"end":{"line":318,"column":39}}]},"12":{"line":321,"type":"if","locations":[{"start":{"line":321,"column":3},"end":{"line":321,"column":3}},{"start":{"line":321,"column":3},"end":{"line":321,"column":3}}]},"13":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":5},"end":{"line":325,"column":5}},{"start":{"line":325,"column":5},"end":{"line":325,"column":5}}]},"14":{"line":379,"type":"if","locations":[{"start":{"line":379,"column":3},"end":{"line":379,"column":3}},{"start":{"line":379,"column":3},"end":{"line":379,"column":3}}]},"15":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":2},"end":{"line":385,"column":2}},{"start":{"line":385,"column":2},"end":{"line":385,"column":2}}]},"16":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":2},"end":{"line":398,"column":2}},{"start":{"line":398,"column":2},"end":{"line":398,"column":2}}]},"17":{"line":404,"type":"if","locations":[{"start":{"line":404,"column":2},"end":{"line":404,"column":2}},{"start":{"line":404,"column":2},"end":{"line":404,"column":2}}]},"18":{"line":449,"type":"if","locations":[{"start":{"line":449,"column":2},"end":{"line":449,"column":2}},{"start":{"line":449,"column":2},"end":{"line":449,"column":2}}]},"19":{"line":467,"type":"if","locations":[{"start":{"line":467,"column":2},"end":{"line":467,"column":2}},{"start":{"line":467,"column":2},"end":{"line":467,"column":2}}]},"20":{"line":494,"type":"if","locations":[{"start":{"line":494,"column":2},"end":{"line":494,"column":2}},{"start":{"line":494,"column":2},"end":{"line":494,"column":2}}]},"21":{"line":502,"type":"if","locations":[{"start":{"line":502,"column":4},"end":{"line":502,"column":4}},{"start":{"line":502,"column":4},"end":{"line":502,"column":4}}]},"22":{"line":517,"type":"if","locations":[{"start":{"line":517,"column":2},"end":{"line":517,"column":2}},{"start":{"line":517,"column":2},"end":{"line":517,"column":2}}]},"23":{"line":517,"type":"binary-expr","locations":[{"start":{"line":517,"column":6},"end":{"line":517,"column":12}},{"start":{"line":517,"column":16},"end":{"line":517,"column":52}}]},"24":{"line":537,"type":"if","locations":[{"start":{"line":537,"column":2},"end":{"line":537,"column":2}},{"start":{"line":537,"column":2},"end":{"line":537,"column":2}}]},"25":{"line":544,"type":"if","locations":[{"start":{"line":544,"column":2},"end":{"line":544,"column":2}},{"start":{"line":544,"column":2},"end":{"line":544,"column":2}}]},"26":{"line":544,"type":"binary-expr","locations":[{"start":{"line":544,"column":6},"end":{"line":544,"column":34}},{"start":{"line":544,"column":38},"end":{"line":544,"column":63}}]},"27":{"line":554,"type":"if","locations":[{"start":{"line":554,"column":2},"end":{"line":554,"column":2}},{"start":{"line":554,"column":2},"end":{"line":554,"column":2}}]},"28":{"line":561,"type":"if","locations":[{"start":{"line":561,"column":2},"end":{"line":561,"column":2}},{"start":{"line":561,"column":2},"end":{"line":561,"column":2}}]},"29":{"line":577,"type":"if","locations":[{"start":{"line":577,"column":3},"end":{"line":577,"column":3}},{"start":{"line":577,"column":3},"end":{"line":577,"column":3}}]},"30":{"line":606,"type":"if","locations":[{"start":{"line":606,"column":4},"end":{"line":606,"column":4}},{"start":{"line":606,"column":4},"end":{"line":606,"column":4}}]},"31":{"line":615,"type":"if","locations":[{"start":{"line":615,"column":3},"end":{"line":615,"column":3}},{"start":{"line":615,"column":3},"end":{"line":615,"column":3}}]},"32":{"line":615,"type":"binary-expr","locations":[{"start":{"line":615,"column":8},"end":{"line":615,"column":13}},{"start":{"line":615,"column":17},"end":{"line":615,"column":31}},{"start":{"line":615,"column":36},"end":{"line":615,"column":46}},{"start":{"line":615,"column":50},"end":{"line":615,"column":88}}]},"33":{"line":617,"type":"binary-expr","locations":[{"start":{"line":617,"column":13},"end":{"line":617,"column":34}},{"start":{"line":617,"column":38},"end":{"line":617,"column":44}}]},"34":{"line":659,"type":"if","locations":[{"start":{"line":659,"column":2},"end":{"line":659,"column":2}},{"start":{"line":659,"column":2},"end":{"line":659,"column":2}}]},"35":{"line":695,"type":"if","locations":[{"start":{"line":695,"column":3},"end":{"line":695,"column":3}},{"start":{"line":695,"column":3},"end":{"line":695,"column":3}}]},"36":{"line":784,"type":"if","locations":[{"start":{"line":784,"column":2},"end":{"line":784,"column":2}},{"start":{"line":784,"column":2},"end":{"line":784,"column":2}}]},"37":{"line":870,"type":"binary-expr","locations":[{"start":{"line":870,"column":10},"end":{"line":870,"column":15}},{"start":{"line":870,"column":19},"end":{"line":870,"column":26}}]},"38":{"line":871,"type":"if","locations":[{"start":{"line":871,"column":2},"end":{"line":871,"column":2}},{"start":{"line":871,"column":2},"end":{"line":871,"column":2}}]},"39":{"line":876,"type":"if","locations":[{"start":{"line":876,"column":2},"end":{"line":876,"column":2}},{"start":{"line":876,"column":2},"end":{"line":876,"column":2}}]},"40":{"line":898,"type":"if","locations":[{"start":{"line":898,"column":3},"end":{"line":898,"column":3}},{"start":{"line":898,"column":3},"end":{"line":898,"column":3}}]},"41":{"line":900,"type":"if","locations":[{"start":{"line":900,"column":4},"end":{"line":900,"column":4}},{"start":{"line":900,"column":4},"end":{"line":900,"column":4}}]},"42":{"line":906,"type":"if","locations":[{"start":{"line":906,"column":5},"end":{"line":906,"column":5}},{"start":{"line":906,"column":5},"end":{"line":906,"column":5}}]},"43":{"line":926,"type":"if","locations":[{"start":{"line":926,"column":2},"end":{"line":926,"column":2}},{"start":{"line":926,"column":2},"end":{"line":926,"column":2}}]},"44":{"line":1055,"type":"if","locations":[{"start":{"line":1055,"column":2},"end":{"line":1055,"column":2}},{"start":{"line":1055,"column":2},"end":{"line":1055,"column":2}}]},"45":{"line":1060,"type":"if","locations":[{"start":{"line":1060,"column":2},"end":{"line":1060,"column":2}},{"start":{"line":1060,"column":2},"end":{"line":1060,"column":2}}]}},"code":["(function () { YUI.add('gallery-querybuilder', function (Y, NAME) {","","\"use strict\";","","var has_bubble_problem = (0 < Y.UA.ie && Y.UA.ie < 9);","","/**********************************************************************"," * Widget which allows user to build a list of query criteria, e.g., for"," * searching.  All the conditions are either AND'ed or OR'ed.  For a more"," * general query builder, see gallery-exprbuilder."," * "," * @module gallery-querybuilder"," */","","/**"," * <p>The default package provides two data types:  String (which can also"," * be used for numbers) and Select (which provides a menu of options).  The"," * plugin API allows defining additional data types, e.g., date range or"," * multi-select.  Every plugin must be registered in"," * `Y.QueryBuilder.plugin_mapping`.  Plugins must implement the following"," * functions:</p>"," *"," * <dl>"," * <dt>`constructor(qb, config)`</dt>"," * <dd>The arguments passed to the constructor are the QueryBuilder instance"," *\t\tand the `pluginConfig` set on the QueryBuilder instance."," *\t\tAt the minimum, this function should initalize form field name patterns"," *\t\tusing `config.field_prefix`.</dd>"," * <dt>`create(query_index, var_config, op_list, value)`<dt>"," * <dd>This function must create the additional cells for the query row and"," *\t\tpopulate these cells appropriately.  (The QueryBuilder widget will"," *\t\tinsert the cells into the table.)  `var_config` is the"," *\t\titem from the QueryBuilder's `var_list` that the user"," *\t\tselected.  `op_list` is the item from the QueryBuilder's"," *\t\t`operators` which matches the variable selected by the"," *\t\tuser.  `value` is optional.  If specified, it is the"," *\t\tinitial value(s) to be displayed by the plugin.</dd>"," * <dt>`postCreate(query_index, var_config, op_list, value)`</dt>"," * <dd>Optional.  If it exists, it will be called after the cells returned by"," *\t\t`create()` have been inserted into the table.  The arguments"," *\t\tare the same as `create()`.</dd>"," * <dt>`destroy()`</dt>"," * <dd>Destroy the plugin.  (The QueryBuilder widget will remove the cells"," *\t\tand purge all events.)</dd>"," * <dt>`updateName(new_index)`</dt>"," * <dd>Update the names of the form fields managed by the plugin.</dd>"," * <dt>`set(query_index, data)`</dt>"," * <dd>Set the displayed value(s) by extracting values from data (a map)"," *\t\tbased on the current names of the plugin's form fields.</dd>"," * <dt>`toDatabaseQuery()`</dt>"," * <dd>Return an array of arrays.  Each inner array contains an operation"," *\t\tand a value.  The default String and Select plugins each return"," *\t\ta single inner array.  A date range plugin would return two inner"," *\t\tarrays, one for the start date and one for the end date.</dd>"," * <dt>`validate()`</dt>"," * <dd>Optional.  If additional validations are required beyond the basic"," *\t\tvalidations encoded in CSS, this function should check them.  If"," *\t\tthe input is not valid, call `displayFieldMessage()`"," *\t\ton the QueryBuilder object and return false.  Otherwise, return"," *\t\ttrue.</dd>"," * </dl>"," *"," * @class QueryBuilder"," * @extends Widget"," * @constructor"," * @param var_list {Array} List of variables that be included in the query."," * @param var_list.name {String} The name of the variable.  Set as the `value` for the select option."," * @param var_list.type {String} The variable type.  Used to determine which plugin to instantiate. Must match a key in `Y.QueryBuilder.plugin_mapping`. (You can add new plugins to this global mapping.)"," * @param var_list.text {String} The text displayed when the variable is selected."," * @param var_list.** {Mixed} plugin-specific configuration"," * @param operators {Object} Map of variable types to list of operators. Each operator is an object defining `value` and `text`."," * @param config {Object} Widget configuration"," */","","function QueryBuilder(","\t/* array */\t\tvar_list,","\t/* object */\toperators,","\t/* object */\tconfig)","{","\tif (!Y.FormManager)","\t{","\t\tY.FormManager =","\t\t{","\t\t\trow_marker_class:    '',","\t\t\tfield_marker_class:  '',","\t\t\tstatus_marker_class: '',","\t\t\trequired_class:      ''","\t\t};","\t}","","\t// list of variables that can be queried","","\tthis.var_list = var_list.slice(0);","","\t// list of possible query operations for each data type","","\tthis.op_list      = Y.clone(operators, true);","\tthis.op_list.none = [];","","\t// table rows containing the query elements","","\tthis.row_list = [];","","\tQueryBuilder.superclass.constructor.call(this, config);","}","","QueryBuilder.NAME = \"querybuilder\";","","QueryBuilder.ATTRS =","{","\t/**","\t * The prompt displayed when a new item is added to the query.","\t *","\t * @attribute chooseVarPrompt","\t * @type {String}","\t * @default \"Choose a variable\"","\t * @writeonce","\t */","\tchooseVarPrompt:","\t{","\t\tvalue:     'Choose a Variable',","\t\tvalidator: Y.Lang.isString,","\t\twriteOnce: true","\t},","","\t/**","\t * All generated form field names start with this prefix.  This avoids","\t * conflicts if you have more than one QueryBuilder on a page.","\t *","\t * @attribute fieldPrefix","\t * @type {String}","\t * @default \"\"","\t * @writeonce","\t */","\tfieldPrefix:","\t{","\t\tvalue:     '',","\t\tvalidator: Y.Lang.isString,","\t\twriteOnce: true","\t},","","\t/**","\t * Configuration passed to plugins when they are constructed.","\t *","\t * @attribute pluginConfig","\t * @type {Object}","\t * @default {}","\t * @writeonce","\t */","\tpluginConfig:","\t{","\t\tvalue:     {},","\t\tvalidator: Y.Lang.isObject,","\t\twriteOnce: true","\t}","};","","/**"," * @event queryChanged"," * @description Fires when the query is modified."," * @param info {Object} `remove` is `true` if a row was removed"," */","","function initVarList()","{","\tthis.var_list.unshift(","\t{","\t\tname: 'yui3-querybuilder-choose-prompt',","\t\ttype: 'none',","\t\ttext: this.get('chooseVarPrompt')","\t});","}","","function findRow(","\t/* array */\t\trow_list,","\t/* element */\tquery_row)","{","\tvar count = row_list.length;","\tfor (var i=0; i<count; i++)","\t{","\t\tif (row_list[i].row == query_row)","\t\t{","\t\t\treturn i;","\t\t}","\t}","","\treturn -1;","}","","function insertRow(","\t/* event */\t\te,","\t/* element */\tquery_row)","{","\te.halt();","\tthis.appendNew();","}","","function removeRow(","\t/* event */\t\te,","\t/* element */\tquery_row)","{","\te.halt();","","\tvar i = findRow(this.row_list, query_row);","\tif (i >= 0)","\t{","\t\tthis.remove(i);","\t}","}","","function changeVar(","\t/* event */\t\te,","\t/* element */\tquery_row)","{","\tvar i = findRow(this.row_list, query_row);","\tif (i >= 0)","\t{","\t\tthis.update(i);","\t}","}","","function keyUp(e)","{","\tif (e.keyCode != 13)","\t{","\t\tthis._notifyChanged();","\t}","}","","Y.extend(QueryBuilder, Y.Widget,","{","\tinitializer: function(config)","\t{","\t\tvar field_prefix                      = this.get('fieldPrefix');","\t\tthis.var_menu_name_pattern            = field_prefix + 'query_var_{i}';","\t\tthis.get('pluginConfig').field_prefix = field_prefix;","\t\tthis.plugin_column_count              = 0;\t// expands as needed","","\t\tinitVarList.call(this);","\t},","","\trenderUI: function()","\t{","\t\tvar container = this.get('contentBox');","\t\tcontainer.on('change', this._notifyChanged, this);","\t\tcontainer.on('keyup', keyUp, this);","","\t\tthis.table = Y.Node.create('<table></table>');","\t\tcontainer.appendChild(this.table);","","\t\tthis.appendNew();","\t},","","\tdestructor: function()","\t{","\t\tfor (var i=0; i<this.row_list.length; i++)","\t\t{","\t\t\tif (this.row_list[i].plugin)","\t\t\t{","\t\t\t\tthis.row_list[i].plugin.destroy();","\t\t\t}","\t\t}","","\t\tthis.row_list = null;","\t\tthis.table    = null;","\t},","","\t/**","\t * Reset the query.","\t *","\t * @method reset","\t * @param var_list {Array} If specified, the list of available variables is replaced.","\t * @param operators {Object} If specified, the operators for all variable types will be replaced.","\t */","\treset: function(","\t\t/* array */\t\tvar_list,","\t\t/* object */\toperators)","\t{","\t\tthis._allow_remove_last_row = true;","","\t\tfor (var i=this.row_list.length-1; i>=0; i--)","\t\t{","\t\t\tthis.remove(i);","\t\t}","","\t\tthis._allow_remove_last_row = false;","","\t\tif (var_list)","\t\t{","\t\t\tthis.var_list = var_list.slice(0);","\t\t\tinitVarList.call(this);","\t\t}","","\t\tif (operators)","\t\t{","\t\t\tthis.op_list      = Y.clone(operators, true);","\t\t\tthis.op_list.none = [];","\t\t}","","\t\tthis.has_messages = false;","\t\tthis.appendNew();","\t},","","\t/**","\t * Append a new query condition to the table.","\t *","\t * @method appendNew","\t * @param name {String} If specified, this variable is selected.","\t * @param value {Mixed} If specified, this value is selected.  Refer to the appropriate plugin documentation to figure out what data to pass.","\t * @return {Object} plugin that was created for the row, if any","\t */","\tappendNew: function(","\t\t/* string */\tname,","\t\t/* mixed */\t\tvalue)","\t{","\t\t// if has single, neutral row, use it","","\t\tif (name && this.row_list.length == 1)","\t\t{","\t\t\tvar var_menu = this.row_list[0].var_menu;","\t\t\tif (var_menu.get('selectedIndex') === 0)","\t\t\t{","\t\t\t\tfor (var i=0; i<this.var_list.length; i++)","\t\t\t\t{","\t\t\t\t\tif (this.var_list[i].name == name)","\t\t\t\t\t{","\t\t\t\t\t\tvar_menu.set('selectedIndex', i);","\t\t\t\t\t\tbreak;","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\tthis.update(0, value);","\t\t\t\treturn this.row_list[0].plugin;","\t\t\t}","\t\t}","","\t\t// create new row","","\t\tvar new_index  = this.row_list.length;","\t\tvar query_body = Y.Node.create('<tbody></tbody>');","\t\tquery_body.set('className', Y.FormManager.row_marker_class);","","\t\t// error row","","\t\tvar error_row = Y.Node.create('<tr></tr>');","\t\terror_row.set('className', this.getClassName('error'));","\t\tquery_body.appendChild(error_row);","","\t\tvar error_cell = this._createContainer();","\t\terror_cell.set('colSpan', 1 + this.plugin_column_count);","\t\terror_cell.set('innerHTML', '<p class=\"' + Y.FormManager.status_marker_class + '\"></p>');","\t\terror_row.appendChild(error_cell);","","\t\terror_row.appendChild(this._createContainer());","","\t\t// criterion row","","\t\tvar query_row = Y.Node.create('<tr></tr>');","\t\tquery_row.set('className', this.getClassName('criterion'));","\t\tquery_body.appendChild(query_row);","","\t\t// cell for query variable menu","","\t\tvar var_cell = this._createContainer();","\t\tvar_cell.set('className', this.getClassName('variable'));","\t\tquery_row.appendChild(var_cell);","","\t\t// menu for selecting query variable","","\t\tvar_cell.set('innerHTML', this._variablesMenu(this.variableName(new_index)));","","\t\tvar var_menu = var_cell.one('select');","\t\tvar_menu.on('change', changeVar, this, query_row);","","\t\tvar options = Y.Node.getDOMNode(var_menu).options;","\t\tfor (var i=0; i<this.var_list.length; i++)","\t\t{","\t\t\toptions[i] = new Option(this.var_list[i].text, this.var_list[i].name);","\t\t\tif (this.var_list[i].name == name)","\t\t\t{","\t\t\t\tvar_menu.set('selectedIndex', i);","\t\t\t}","\t\t}","","\t\tif (has_bubble_problem)","\t\t{","\t\t\tvar_menu.on('change', this._notifyChanged, this);","\t\t}","","\t\t// controls for this row","","\t\tvar control_cell = this._createContainer();","\t\tcontrol_cell.set('className', this.getClassName('controls'));","\t\tcontrol_cell.set('innerHTML', this._rowControls());","\t\tquery_row.appendChild(control_cell);","","\t\tvar insert_control = control_cell.one('.'+this.getClassName('insert'));","\t\tif (insert_control)","\t\t{","\t\t\tinsert_control.on('click', insertRow, this, query_row);","\t\t}","","\t\tvar remove_control = control_cell.one('.'+this.getClassName('remove'));","\t\tif (remove_control)","\t\t{","\t\t\tremove_control.on('click', removeRow, this, query_row);","\t\t}","","\t\t// insert into DOM after fully constructed","","\t\tthis.table.appendChild(query_body);","","\t\tvar obj =","\t\t{","\t\t\tbody:     query_body,","\t\t\trow:      query_row,","\t\t\tvar_menu: var_menu,","\t\t\tcontrol:  control_cell,","\t\t\terror:    error_cell","\t\t};","\t\tthis.row_list.push(obj);","\t\tthis.update(new_index, value);","","\t\tquery_body.scrollIntoView();","","\t\treturn this.row_list[new_index].plugin;","\t},","","\t/**","\t * Set the value of the specified row.","\t *","\t * @method update","\t * @param row_index {int} The index of the row","\t * @param value {Mixed} If specified, the value to set (Refer to the appropriate plugin documentation to figure out what data to pass.)","\t */","\tupdate: function(","\t\t/* int */\t\trow_index,","\t\t/* string */\tvalue)","\t{","\t\tvar query_row    = this.row_list[row_index].row;","\t\tvar control_cell = this.row_list[row_index].control;","","\t\t// clear error","","\t\tthis.row_list[row_index].error.one('.'+Y.FormManager.status_marker_class).set('innerHTML', '');","","\t\t// remove all but the first cell (variable name) and last cell (controls)","","\t\tif (this.row_list[row_index].plugin)","\t\t{","\t\t\tthis.row_list[row_index].plugin.destroy();","\t\t\tthis.row_list[row_index].plugin = null;","\t\t}","","\t\twhile (query_row.get('children').size() > 2)","\t\t{","\t\t\tvar child = query_row.get('children').item(0).next();","\t\t\tchild.remove(true);","\t\t}","","\t\t// re-build the table row","","\t\tvar var_menu     = this.row_list[row_index].var_menu;","\t\tvar selected_var = this.var_list[ var_menu.get('selectedIndex') ];","","\t\tvar cells = [];","\t\tif (selected_var.type == 'none')","\t\t{","\t\t\tquery_row.addClass(this.getClassName('empty'));","\t\t}","\t\telse","\t\t{","\t\t\tquery_row.removeClass(this.getClassName('empty'));","","\t\t\tthis.row_list[row_index].plugin =","\t\t\t\tnew QueryBuilder.plugin_mapping[ selected_var.type ](","\t\t\t\t\tthis, this.get('pluginConfig'));","\t\t\tcells =","\t\t\t\tthis.row_list[row_index].plugin.create(","\t\t\t\t\trow_index, selected_var,","\t\t\t\t\tthis.op_list[ selected_var.type ], value);","\t\t}","","\t\twhile (cells.length < this.plugin_column_count)","\t\t{","\t\t\tcells.push(this._createContainer());","\t\t}","","\t\tfor (var i=0; i<cells.length; i++)","\t\t{","\t\t\tquery_row.insertBefore(cells[i], control_cell);","\t\t}","","\t\tif (cells.length > this.plugin_column_count)","\t\t{","\t\t\tvar col_span = 1 + cells.length;","\t\t\tfor (var i=0; i<this.row_list.length; i++)","\t\t\t{","\t\t\t\tvar row = this.row_list[i].row;","\t\t\t\tthis.row_list[i].error.set('colSpan', col_span);","","\t\t\t\tif (row != query_row)","\t\t\t\t{","\t\t\t\t\tvar control = this.row_list[i].control;","","\t\t\t\t\tfor (var j=this.plugin_column_count; j<cells.length; j++)","\t\t\t\t\t{","\t\t\t\t\t\trow.insertBefore(this._createContainer(), control);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tthis.plugin_column_count = cells.length;","\t\t}","","\t\tvar plugin = this.row_list[row_index].plugin;","\t\tif (plugin && Y.Lang.isFunction(plugin.postCreate))","\t\t{","\t\t\tthis.row_list[row_index].plugin.postCreate(","\t\t\t\trow_index, selected_var,","\t\t\t\tthis.op_list[ selected_var.type ], value);","\t\t}","\t},","","\t/**","\t * Removes the specified row.","\t *","\t * @method remove","\t * @param row_index {int} The index of the row","\t * @return {boolean} `true` if successful","\t */","\tremove: function(","\t\t/* int */\trow_index)","\t{","\t\t// sanity checks","","\t\tif (this.row_list.length <= 0)","\t\t{","\t\t\treturn false;","\t\t}","","\t\t// last row cannot be removed","","\t\tif (!this._allow_remove_last_row && this.row_list.length == 1)","\t\t{","\t\t\tvar var_menu = this.row_list[0].var_menu;","\t\t\tvar_menu.set('selectedIndex', 0);","\t\t\tthis.update(0);","\t\t\tthis.fire('queryChanged', {remove: true});","\t\t\treturn true;","\t\t}","","\t\tvar query_body = this.row_list[row_index].body;","\t\tif (query_body === null)","\t\t{","\t\t\treturn false;","\t\t}","","\t\t// remove row","","\t\tif (this.row_list[row_index].plugin)","\t\t{","\t\t\tthis.row_list[row_index].plugin.destroy();","\t\t}","","\t\tquery_body.remove(true);","\t\tthis.row_list.splice(row_index, 1);","","\t\t// renumber remaining rows","","\t\tY.Array.each(this.row_list, function(row, i)","\t\t{","\t\t\tvar var_menu = row.var_menu;","\t\t\tvar_menu.setAttribute('name', this.variableName(i));","","\t\t\tvar selected_var = this.var_list[ var_menu.get('selectedIndex') ];","\t\t\tif (selected_var.type != 'none')","\t\t\t{","\t\t\t\trow.plugin.updateName(i);","\t\t\t}","\t\t},","\t\tthis);","","\t\tthis.fire('queryChanged', {remove: true});","\t\treturn true;","\t},","","\t/**","\t * Validate the fields in each row.","\t * ","\t * @method validateFields","\t * @return {Boolean} `true` if all values are valid","\t */","\tvalidateFields: function()","\t{","\t\tthis.clearFieldMessages();","","\t\tvar status = true;","\t\tY.Array.each(this.row_list, function(row, i)","\t\t{","\t\t\tvar info;","\t\t\trow.row.all('input').some(function(n)","\t\t\t{","\t\t\t\tinfo = Y.FormManager.validateFromCSSData(n);","","\t\t\t\tif (info.error)","\t\t\t\t{","\t\t\t\t\tthis.displayFieldMessage(n, info.error, 'error');","\t\t\t\t\tstatus = false;","\t\t\t\t\treturn true;","\t\t\t\t}","\t\t\t},","\t\t\tthis);","","\t\t\tif ((!info || info.keepGoing) && row.plugin && Y.Lang.isFunction(row.plugin.validate))","\t\t\t{","\t\t\t\tstatus = row.plugin.validate() && status;\t// status last to guarantee call to validate()","\t\t\t}","\t\t},","\t\tthis);","","\t\treturn status;","\t},","","\t/**","\t * @method clearFieldMessages","\t */","\tclearFieldMessages: function()","\t{","\t\tthis.has_messages = false;","","\t\tthis.get('contentBox').all('input').each(function(n)","\t\t{","\t\t\tY.FormManager.clearMessage(n);","\t\t});","","\t\tthis.get('contentBox').all('select').each(function(n)","\t\t{","\t\t\tY.FormManager.clearMessage(n);","\t\t});","\t},","","\t/**","\t * Display a message for the specified field.","\t * ","\t * @method displayFieldMessage","\t * @param e {String|Object} The selector for the element or the element itself","\t * @param msg {String} The message","\t * @param type {String} The message type (see Y.FormManager.status_order)","\t * @param [scroll] {boolean} `true` if the form row should be scrolled into view","\t * @return {boolean} true if the message was displayed, false if a higher precedence message was already there","\t */","\tdisplayFieldMessage: function(","\t\t/* id/object */\te,","\t\t/* string */\tmsg,","\t\t/* string */\ttype,","\t\t/* boolean */\tscroll)","\t{","\t\tif (Y.FormManager.displayMessage(e, msg, type, this.has_messages, scroll))","\t\t{","\t\t\tthis.has_messages = true;","\t\t\treturn true;","\t\t}","\t\telse","\t\t{","\t\t\treturn false;","\t\t}","\t},","","\t/**","\t * Returns plugin used for the specified row, if any.","\t *","\t * @method getPlugin","\t * @param row_index {int} The index of the row","\t * @return {Object} the plugin for the row, if any","\t */","\tgetPlugin: function(","\t\t/* int */\trow_index)","\t{","\t\treturn this.row_list[row_index].plugin;","\t},","","\t/**","\t * @method toDatabaseQuery","\t * @return {Array} list of [var, op, value] tuples suitable for a database query","\t */","\ttoDatabaseQuery: function()","\t{","\t\tvar result = [];","","\t\tfor (var i=0; i<this.row_list.length; i++)","\t\t{","\t\t\tvar row    = this.row_list[i];","\t\t\tvar plugin = row.plugin;","\t\t\tif (plugin)","\t\t\t{","\t\t\t\tvar list = plugin.toDatabaseQuery();","\t\t\t\tfor (var j=0; j<list.length; j++)","\t\t\t\t{","\t\t\t\t\tresult.push([ row.var_menu.get('value') ].concat(list[j]));","\t\t\t\t}","\t\t\t}","\t\t}","","\t\treturn result;","\t},","","\t/*","\t * API for plugins","\t */","","\t/**","\t * @method _createContainer","\t * @protected","\t * @return {DOM element} container for one piece of a query row","\t */","\t_createContainer: function()","\t{","\t\treturn Y.Node.create('<td></td>');","\t},","","\t/**","\t * Fires the queryChanged event.","\t *","\t * @method _notifyChanged","\t * @protected","\t */","\t_notifyChanged: function()","\t{","\t\tthis.fire('queryChanged');","\t},","","\t/*","\t * Form element names.","\t */","","\t/**","\t * @method variableName","\t * @param i {int} query row index","\t * @return {String} name for the select form element listing the available query variables","\t */","\tvariableName: function(","\t\t/* int */\ti)","\t{","\t\treturn Y.Lang.sub(this.var_menu_name_pattern, {i:i});","\t},","","\t//","\t// Markup","\t//","","\t/**","\t * @method _variablesMenu","\t * @protected","\t * @param menu_name {String} name for the select form element","\t * @return {String} markup for the query variable menu","\t */","\t_variablesMenu: function(","\t\t/* string */\tmenu_name)","\t{","\t\t// This must use a select tag!","","\t\tvar markup = '<select name=\"{n}\" class=\"{f} {c}\" />';","","\t\treturn Y.Lang.sub(markup,","\t\t{","\t\t\tn: menu_name,","\t\t\tf: Y.FormManager.field_marker_class,","\t\t\tc: this.getClassName('field')","\t\t});","\t},","","\t/**","\t * @method _rowControls","\t * @protected","\t * @return {String} markup for the row controls (insert and remove)","\t */","\t_rowControls: function()","\t{","\t\tvar markup =","\t\t\t'<button type=\"button\" class=\"{cr}\">&ndash;</button>' +","\t\t\t'<button type=\"button\" class=\"{ci}\">+</button>';","","\t\tif (!this._controls_markup)","\t\t{","\t\t\tthis._controls_markup = Y.Lang.sub(markup,","\t\t\t{","\t\t\t\tci: this.getClassName('insert'),","\t\t\t\tcr: this.getClassName('remove')","\t\t\t});","\t\t}","","\t\treturn this._controls_markup;","\t}","});","","Y.QueryBuilder = QueryBuilder;","","/**"," * <p>Environment information.</p>"," * "," * <dl>"," * <dt>has_bubble_problem</dt>"," * <dd>True if change events from select elements do not bubble.</dd>"," * </dl>"," * "," * @property Env"," * @type {Object}"," * @static"," */","Y.QueryBuilder.Env =","{","\thas_bubble_problem: has_bubble_problem","};","/**"," * @module gallery-querybuilder"," */","","/**********************************************************************"," * <p>Plugin for accepting a string or number.  All the operators specified"," * for this plugin are displayed on a menu.</p>"," * "," * <p>In the <code>var_list</code> configuration, specify"," * <code>validation</code> to provide CSS classes that will be interpreted"," * by <code>Y.FormManager</code>.</p>"," * "," * <p>To enable autocomplete, define <code>autocomplete</code> in the"," * <code>var_list</code> configuration.  The object will be used as the"," * configuration for <code>Y.Plugin.AutoComplete</code>.  If you specify"," * <code>autocomplete.containerClassName</code>, this CSS class will be"," * added to the container generated by the autocomplete plugin.</p>"," * "," * <p>The <code>value</code> argument passed to"," * <code>QueryBuilder.appendNew()</code> must be an array with two"," * elements: <code>[ operator_name, value ]</code>.</p>"," * "," * @namespace QueryBuilder"," * @class String"," */","","QueryBuilder.String = function(","\t/* object */\tquery_builder,","\t/* object */\tconfig)","{","\tthis.qb = query_builder;","","\tthis.op_menu_name_pattern   = config.field_prefix + 'query_op_{i}';","\tthis.val_input_name_pattern = config.field_prefix + 'query_val_{i}';","};","","QueryBuilder.String.prototype =","{","\tcreate: function(","\t\t/* int */\t\tquery_index,","\t\t/* object */\tvar_config,","\t\t/* array */\t\top_list,","\t\t/* array */\t\tvalue)","\t{","\t\tvar op_cell = this.qb._createContainer();","\t\top_cell.set('className', this.qb.getClassName('operator'));","\t\top_cell.set('innerHTML', this._operationsMenu(this.operationName(query_index)));","\t\tthis.op_menu = op_cell.one('select');","","\t\tvar options = Y.Node.getDOMNode(this.op_menu).options;","\t\tfor (var i=0; i<op_list.length; i++)","\t\t{","\t\t\toptions[i] = new Option(op_list[i].text, op_list[i].value);","\t\t}","","\t\tvalue = value || ['',''];","\t\tif (value[0])","\t\t{","\t\t\tthis.op_menu.set('value', value[0]);","\t\t}","","\t\tif (has_bubble_problem)","\t\t{","\t\t\tthis.op_menu.on('change', this.qb._notifyChanged, this.qb);","\t\t}","","\t\tvar value_cell = this.qb._createContainer();","\t\tvalue_cell.set('className', this.qb.getClassName('value'));","\t\tvalue_cell.set('innerHTML', this._valueInput(this.valueName(query_index), var_config.validation));","\t\tthis.value_input = value_cell.one('input');","\t\tthis.value_input.set('value', value[1]);\t// avoid formatting","","\t\treturn [ op_cell, value_cell ];","\t},","","\tpostCreate: function(","\t\t/* int */\t\tquery_index,","\t\t/* object */\tvar_config,","\t\t/* array */\t\top_list,","\t\t/* array */\t\tvalue)","\t{","\t\tY.Lang.later(1, this, function()\t// hack for IE7","\t\t{","\t\t\tif (this.value_input)\t\t// could be destroyed","\t\t\t{","\t\t\t\tif (var_config.autocomplete)","\t\t\t\t{","\t\t\t\t\tvar config    = Y.clone(var_config.autocomplete, true);","\t\t\t\t\tconfig.render = Y.one('body');","\t\t\t\t\tthis.value_input.plug(Y.Plugin.AutoComplete, config);","","\t\t\t\t\tif (var_config.autocomplete.containerClassName)","\t\t\t\t\t{","\t\t\t\t\t\tthis.value_input.ac.get('boundingBox').addClass(var_config.autocomplete.containerClassName);","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\ttry","\t\t\t\t{","\t\t\t\t\tthis.value_input.focus();","\t\t\t\t}","\t\t\t\tcatch (e)","\t\t\t\t{","\t\t\t\t\t// IE will complain if field is invisible, instead of just ignoring it","\t\t\t\t}","\t\t\t}","\t\t});","\t},","","\tdestroy: function()","\t{","\t\tif (this.value_input.unplug)","\t\t{","\t\t\tthis.value_input.unplug(Y.Plugin.AutoComplete);","\t\t}","","\t\tthis.op_menu     = null;","\t\tthis.value_input = null;","\t},","","\tupdateName: function(","\t\t/* int */\tnew_index)","\t{","\t\tthis.op_menu.setAttribute('name', this.operationName(new_index));","\t\tthis.value_input.setAttribute('name', this.valueName(new_index));","\t},","","\tset: function(","\t\t/* int */\tquery_index,","\t\t/* map */\tdata)","\t{","\t\tthis.op_menu.set('value', data[ this.operationName(query_index) ]);","\t\tthis.value_input.set('value', data[ this.valueName(query_index) ]);","\t},","","\ttoDatabaseQuery: function()","\t{","\t\treturn [ [ this.op_menu.get('value'), this.value_input.get('value') ] ];","\t},","","\t/* *********************************************************************","\t * Form element names.","\t */","","\toperationName: function(","\t\t/* int */\ti)","\t{","\t\treturn Y.Lang.sub(this.op_menu_name_pattern, {i:i});","\t},","","\tvalueName: function(","\t\t/* int */\ti)","\t{","\t\treturn Y.Lang.sub(this.val_input_name_pattern, {i:i});","\t},","","\t//","\t// Markup","\t//","","\t_operationsMenu: function(","\t\t/* string */\tmenu_name)","\t{","\t\t// This must use a select tag!","","\t\tvar markup = '<select name=\"{n}\" class=\"{f} {c}\" />';","","\t\treturn Y.Lang.sub(markup,","\t\t{","\t\t\tn: menu_name,","\t\t\tf: Y.FormManager.field_marker_class,","\t\t\tc: this.qb.getClassName('field')","\t\t});","\t},","","\t_valueInput: function(","\t\t/* string */\tinput_name,","\t\t/* string */\tvalidation_class)","\t{","\t\t// This must use an input tag!","","\t\tvar markup = '<input type=\"text\" name=\"{n}\" class=\"yiv-required {f} {c}\"/>';","","\t\treturn Y.Lang.sub(markup,","\t\t{","\t\t\tn: input_name,","\t\t\tf: Y.FormManager.field_marker_class,","\t\t\tc: validation_class + ' ' + this.qb.getClassName('field')","\t\t});","\t}","};","/**"," * @module gallery-querybuilder"," */","","/**********************************************************************"," * <p>Plugin for choosing from a list of values.  In the"," * <code>var_list</code> configuration, specify <code>value_list</code> as"," * a list of objects, each defining <code>value</code> and"," * <code>text</code>.</p>"," * "," * <p>There must be exactly one operator specified for this plugin.</p>"," * "," * <p>The <code>value</code> argument passed to"," * <code>QueryBuilder.appendNew()</code> must be a string: the value of the"," * menu item to select.</p>"," * "," * @namespace QueryBuilder"," * @class Select"," */","","QueryBuilder.Select = function(","\t/* object */\tquery_builder,","\t/* object */\tconfig)","{","\tthis.qb = query_builder;","","\tthis.val_input_name_pattern = config.field_prefix + 'query_val_{i}';","};","","QueryBuilder.Select.prototype =","{","\tcreate: function(","\t\t/* int */\t\tquery_index,","\t\t/* object */\tvar_config,","\t\t/* array */\t\top_list,","\t\t/* string */\tvalue)","\t{","\t\tvar value_cell = this.qb._createContainer();","\t\tvalue_cell.set('className', this.qb.getClassName('value'));","\t\tvalue_cell.set('innerHTML', this._valuesMenu(this.valueName(query_index)));","\t\tthis.value_menu = value_cell.one('select');","","\t\tvar options    = Y.Node.getDOMNode(this.value_menu).options;","\t\tvar value_list = var_config.value_list;","\t\tfor (var i=0; i<value_list.length; i++)","\t\t{","\t\t\toptions[i] = new Option(value_list[i].text, value_list[i].value);","\t\t}","","\t\tif (value)","\t\t{","\t\t\tthis.value_menu.set('value', value);","\t\t}","","\t\tif (has_bubble_problem)","\t\t{","\t\t\tthis.value_menu.on('change', this.qb._notifyChanged, this.qb);","\t\t}","","\t\tthis.db_query_equals = op_list[0];","","\t\treturn [ value_cell ];","\t},","","\tpostCreate: function(","\t\t/* int */\t\tquery_index,","\t\t/* object */\tvar_config,","\t\t/* array */\t\top_list,","\t\t/* array */\t\tvalue)","\t{","\t\ttry","\t\t{","\t\t\tthis.value_menu.focus();","\t\t}","\t\tcatch (e)","\t\t{","\t\t\t// IE will complain if field is invisible, instead of just ignoring it","\t\t}","\t},","","\tdestroy: function()","\t{","\t\tthis.value_menu = null;","\t},","","\tupdateName: function(","\t\t/* int */\tnew_index)","\t{","\t\tthis.value_menu.setAttribute('name', this.valueName(new_index));","\t},","","\tset: function(","\t\t/* int */\tquery_index,","\t\t/* map */\tdata)","\t{","\t\tthis.value_menu.set('value', data[ this.valueName(query_index) ]);","\t},","","\ttoDatabaseQuery: function()","\t{","\t\treturn [ [ this.db_query_equals, this.value_menu.get('value') ] ];","\t},","","\t/* *********************************************************************","\t * Form element names.","\t */","","\tvalueName: function(","\t\t/* int */\ti)","\t{","\t\treturn Y.Lang.sub(this.val_input_name_pattern, {i:i});","\t},","","\t//","\t// Markup","\t//","","\t_valuesMenu: function(","\t\t/* string */\tmenu_name)","\t{","\t\t// This must use a select tag!","","\t\tvar markup = '<select name=\"{n}\" class=\"{f} {c}\" />';","","\t\treturn Y.Lang.sub(markup,","\t\t{","\t\t\tn: menu_name,","\t\t\tf: Y.FormManager.field_marker_class,","\t\t\tc: this.qb.getClassName('field')","\t\t});","\t}","};","/**"," * @module gallery-querybuilder"," */","","/**"," * @class QueryBuilder"," */","","/**"," * <p>Mapping of variable types to plugin classes.  (Always introduce new"," * variable types rather than changing the existing mappings.)</p>"," * "," * <dl>"," * <dt>string</dt>"," * <dd>Generic string.</dd>"," * <dt>number</dt>"," * <dd>Generic number.  You must specify appropriate validations, e.g., yiv-integer or yiv-decimal.</dd>"," * <dt>select</dt>"," * <dd>Generic list of values.</dd>"," * </dl>"," *"," * @property plugin_mapping"," * @type {Object}"," * @static"," */","QueryBuilder.plugin_mapping =","{","\tstring: QueryBuilder.String,","\tnumber: QueryBuilder.String,","\tselect: QueryBuilder.Select","};","","","}, 'gallery-2013.01.16-21-05', {","    \"skinnable\": \"true\",","    \"requires\": [","        \"widget\",","        \"gallery-formmgr\"","    ],","    \"optional\": [","        \"gallery-scrollintoview\",","        \"autocomplete\"","    ]","});","","}());"]};
}
var __cov_03fxU3LlPKu8Ytn1FehORw = __coverage__['build/gallery-querybuilder/gallery-querybuilder.js'];
__cov_03fxU3LlPKu8Ytn1FehORw.s['1']++;YUI.add('gallery-querybuilder',function(Y,NAME){__cov_03fxU3LlPKu8Ytn1FehORw.f['1']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['2']++;'use strict';__cov_03fxU3LlPKu8Ytn1FehORw.s['3']++;var has_bubble_problem=(__cov_03fxU3LlPKu8Ytn1FehORw.b['1'][0]++,0<Y.UA.ie)&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['1'][1]++,Y.UA.ie<9);__cov_03fxU3LlPKu8Ytn1FehORw.s['4']++;function QueryBuilder(var_list,operators,config){__cov_03fxU3LlPKu8Ytn1FehORw.f['2']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['5']++;if(!Y.FormManager){__cov_03fxU3LlPKu8Ytn1FehORw.b['2'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['6']++;Y.FormManager={row_marker_class:'',field_marker_class:'',status_marker_class:'',required_class:''};}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['2'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['7']++;this.var_list=var_list.slice(0);__cov_03fxU3LlPKu8Ytn1FehORw.s['8']++;this.op_list=Y.clone(operators,true);__cov_03fxU3LlPKu8Ytn1FehORw.s['9']++;this.op_list.none=[];__cov_03fxU3LlPKu8Ytn1FehORw.s['10']++;this.row_list=[];__cov_03fxU3LlPKu8Ytn1FehORw.s['11']++;QueryBuilder.superclass.constructor.call(this,config);}__cov_03fxU3LlPKu8Ytn1FehORw.s['12']++;QueryBuilder.NAME='querybuilder';__cov_03fxU3LlPKu8Ytn1FehORw.s['13']++;QueryBuilder.ATTRS={chooseVarPrompt:{value:'Choose a Variable',validator:Y.Lang.isString,writeOnce:true},fieldPrefix:{value:'',validator:Y.Lang.isString,writeOnce:true},pluginConfig:{value:{},validator:Y.Lang.isObject,writeOnce:true}};__cov_03fxU3LlPKu8Ytn1FehORw.s['14']++;function initVarList(){__cov_03fxU3LlPKu8Ytn1FehORw.f['3']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['15']++;this.var_list.unshift({name:'yui3-querybuilder-choose-prompt',type:'none',text:this.get('chooseVarPrompt')});}__cov_03fxU3LlPKu8Ytn1FehORw.s['16']++;function findRow(row_list,query_row){__cov_03fxU3LlPKu8Ytn1FehORw.f['4']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['17']++;var count=row_list.length;__cov_03fxU3LlPKu8Ytn1FehORw.s['18']++;for(var i=0;i<count;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['19']++;if(row_list[i].row==query_row){__cov_03fxU3LlPKu8Ytn1FehORw.b['3'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['20']++;return i;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['3'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['21']++;return-1;}__cov_03fxU3LlPKu8Ytn1FehORw.s['22']++;function insertRow(e,query_row){__cov_03fxU3LlPKu8Ytn1FehORw.f['5']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['23']++;e.halt();__cov_03fxU3LlPKu8Ytn1FehORw.s['24']++;this.appendNew();}__cov_03fxU3LlPKu8Ytn1FehORw.s['25']++;function removeRow(e,query_row){__cov_03fxU3LlPKu8Ytn1FehORw.f['6']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['26']++;e.halt();__cov_03fxU3LlPKu8Ytn1FehORw.s['27']++;var i=findRow(this.row_list,query_row);__cov_03fxU3LlPKu8Ytn1FehORw.s['28']++;if(i>=0){__cov_03fxU3LlPKu8Ytn1FehORw.b['4'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['29']++;this.remove(i);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['4'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['30']++;function changeVar(e,query_row){__cov_03fxU3LlPKu8Ytn1FehORw.f['7']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['31']++;var i=findRow(this.row_list,query_row);__cov_03fxU3LlPKu8Ytn1FehORw.s['32']++;if(i>=0){__cov_03fxU3LlPKu8Ytn1FehORw.b['5'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['33']++;this.update(i);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['5'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['34']++;function keyUp(e){__cov_03fxU3LlPKu8Ytn1FehORw.f['8']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['35']++;if(e.keyCode!=13){__cov_03fxU3LlPKu8Ytn1FehORw.b['6'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['36']++;this._notifyChanged();}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['6'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['37']++;Y.extend(QueryBuilder,Y.Widget,{initializer:function(config){__cov_03fxU3LlPKu8Ytn1FehORw.f['9']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['38']++;var field_prefix=this.get('fieldPrefix');__cov_03fxU3LlPKu8Ytn1FehORw.s['39']++;this.var_menu_name_pattern=field_prefix+'query_var_{i}';__cov_03fxU3LlPKu8Ytn1FehORw.s['40']++;this.get('pluginConfig').field_prefix=field_prefix;__cov_03fxU3LlPKu8Ytn1FehORw.s['41']++;this.plugin_column_count=0;__cov_03fxU3LlPKu8Ytn1FehORw.s['42']++;initVarList.call(this);},renderUI:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['10']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['43']++;var container=this.get('contentBox');__cov_03fxU3LlPKu8Ytn1FehORw.s['44']++;container.on('change',this._notifyChanged,this);__cov_03fxU3LlPKu8Ytn1FehORw.s['45']++;container.on('keyup',keyUp,this);__cov_03fxU3LlPKu8Ytn1FehORw.s['46']++;this.table=Y.Node.create('<table></table>');__cov_03fxU3LlPKu8Ytn1FehORw.s['47']++;container.appendChild(this.table);__cov_03fxU3LlPKu8Ytn1FehORw.s['48']++;this.appendNew();},destructor:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['11']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['49']++;for(var i=0;i<this.row_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['50']++;if(this.row_list[i].plugin){__cov_03fxU3LlPKu8Ytn1FehORw.b['7'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['51']++;this.row_list[i].plugin.destroy();}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['7'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['52']++;this.row_list=null;__cov_03fxU3LlPKu8Ytn1FehORw.s['53']++;this.table=null;},reset:function(var_list,operators){__cov_03fxU3LlPKu8Ytn1FehORw.f['12']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['54']++;this._allow_remove_last_row=true;__cov_03fxU3LlPKu8Ytn1FehORw.s['55']++;for(var i=this.row_list.length-1;i>=0;i--){__cov_03fxU3LlPKu8Ytn1FehORw.s['56']++;this.remove(i);}__cov_03fxU3LlPKu8Ytn1FehORw.s['57']++;this._allow_remove_last_row=false;__cov_03fxU3LlPKu8Ytn1FehORw.s['58']++;if(var_list){__cov_03fxU3LlPKu8Ytn1FehORw.b['8'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['59']++;this.var_list=var_list.slice(0);__cov_03fxU3LlPKu8Ytn1FehORw.s['60']++;initVarList.call(this);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['8'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['61']++;if(operators){__cov_03fxU3LlPKu8Ytn1FehORw.b['9'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['62']++;this.op_list=Y.clone(operators,true);__cov_03fxU3LlPKu8Ytn1FehORw.s['63']++;this.op_list.none=[];}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['9'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['64']++;this.has_messages=false;__cov_03fxU3LlPKu8Ytn1FehORw.s['65']++;this.appendNew();},appendNew:function(name,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['13']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['66']++;if((__cov_03fxU3LlPKu8Ytn1FehORw.b['11'][0]++,name)&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['11'][1]++,this.row_list.length==1)){__cov_03fxU3LlPKu8Ytn1FehORw.b['10'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['67']++;var var_menu=this.row_list[0].var_menu;__cov_03fxU3LlPKu8Ytn1FehORw.s['68']++;if(var_menu.get('selectedIndex')===0){__cov_03fxU3LlPKu8Ytn1FehORw.b['12'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['69']++;for(var i=0;i<this.var_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['70']++;if(this.var_list[i].name==name){__cov_03fxU3LlPKu8Ytn1FehORw.b['13'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['71']++;var_menu.set('selectedIndex',i);__cov_03fxU3LlPKu8Ytn1FehORw.s['72']++;break;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['13'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['73']++;this.update(0,value);__cov_03fxU3LlPKu8Ytn1FehORw.s['74']++;return this.row_list[0].plugin;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['12'][1]++;}}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['10'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['75']++;var new_index=this.row_list.length;__cov_03fxU3LlPKu8Ytn1FehORw.s['76']++;var query_body=Y.Node.create('<tbody></tbody>');__cov_03fxU3LlPKu8Ytn1FehORw.s['77']++;query_body.set('className',Y.FormManager.row_marker_class);__cov_03fxU3LlPKu8Ytn1FehORw.s['78']++;var error_row=Y.Node.create('<tr></tr>');__cov_03fxU3LlPKu8Ytn1FehORw.s['79']++;error_row.set('className',this.getClassName('error'));__cov_03fxU3LlPKu8Ytn1FehORw.s['80']++;query_body.appendChild(error_row);__cov_03fxU3LlPKu8Ytn1FehORw.s['81']++;var error_cell=this._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['82']++;error_cell.set('colSpan',1+this.plugin_column_count);__cov_03fxU3LlPKu8Ytn1FehORw.s['83']++;error_cell.set('innerHTML','<p class="'+Y.FormManager.status_marker_class+'"></p>');__cov_03fxU3LlPKu8Ytn1FehORw.s['84']++;error_row.appendChild(error_cell);__cov_03fxU3LlPKu8Ytn1FehORw.s['85']++;error_row.appendChild(this._createContainer());__cov_03fxU3LlPKu8Ytn1FehORw.s['86']++;var query_row=Y.Node.create('<tr></tr>');__cov_03fxU3LlPKu8Ytn1FehORw.s['87']++;query_row.set('className',this.getClassName('criterion'));__cov_03fxU3LlPKu8Ytn1FehORw.s['88']++;query_body.appendChild(query_row);__cov_03fxU3LlPKu8Ytn1FehORw.s['89']++;var var_cell=this._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['90']++;var_cell.set('className',this.getClassName('variable'));__cov_03fxU3LlPKu8Ytn1FehORw.s['91']++;query_row.appendChild(var_cell);__cov_03fxU3LlPKu8Ytn1FehORw.s['92']++;var_cell.set('innerHTML',this._variablesMenu(this.variableName(new_index)));__cov_03fxU3LlPKu8Ytn1FehORw.s['93']++;var var_menu=var_cell.one('select');__cov_03fxU3LlPKu8Ytn1FehORw.s['94']++;var_menu.on('change',changeVar,this,query_row);__cov_03fxU3LlPKu8Ytn1FehORw.s['95']++;var options=Y.Node.getDOMNode(var_menu).options;__cov_03fxU3LlPKu8Ytn1FehORw.s['96']++;for(var i=0;i<this.var_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['97']++;options[i]=new Option(this.var_list[i].text,this.var_list[i].name);__cov_03fxU3LlPKu8Ytn1FehORw.s['98']++;if(this.var_list[i].name==name){__cov_03fxU3LlPKu8Ytn1FehORw.b['14'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['99']++;var_menu.set('selectedIndex',i);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['14'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['100']++;if(has_bubble_problem){__cov_03fxU3LlPKu8Ytn1FehORw.b['15'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['101']++;var_menu.on('change',this._notifyChanged,this);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['15'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['102']++;var control_cell=this._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['103']++;control_cell.set('className',this.getClassName('controls'));__cov_03fxU3LlPKu8Ytn1FehORw.s['104']++;control_cell.set('innerHTML',this._rowControls());__cov_03fxU3LlPKu8Ytn1FehORw.s['105']++;query_row.appendChild(control_cell);__cov_03fxU3LlPKu8Ytn1FehORw.s['106']++;var insert_control=control_cell.one('.'+this.getClassName('insert'));__cov_03fxU3LlPKu8Ytn1FehORw.s['107']++;if(insert_control){__cov_03fxU3LlPKu8Ytn1FehORw.b['16'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['108']++;insert_control.on('click',insertRow,this,query_row);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['16'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['109']++;var remove_control=control_cell.one('.'+this.getClassName('remove'));__cov_03fxU3LlPKu8Ytn1FehORw.s['110']++;if(remove_control){__cov_03fxU3LlPKu8Ytn1FehORw.b['17'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['111']++;remove_control.on('click',removeRow,this,query_row);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['17'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['112']++;this.table.appendChild(query_body);__cov_03fxU3LlPKu8Ytn1FehORw.s['113']++;var obj={body:query_body,row:query_row,var_menu:var_menu,control:control_cell,error:error_cell};__cov_03fxU3LlPKu8Ytn1FehORw.s['114']++;this.row_list.push(obj);__cov_03fxU3LlPKu8Ytn1FehORw.s['115']++;this.update(new_index,value);__cov_03fxU3LlPKu8Ytn1FehORw.s['116']++;query_body.scrollIntoView();__cov_03fxU3LlPKu8Ytn1FehORw.s['117']++;return this.row_list[new_index].plugin;},update:function(row_index,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['14']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['118']++;var query_row=this.row_list[row_index].row;__cov_03fxU3LlPKu8Ytn1FehORw.s['119']++;var control_cell=this.row_list[row_index].control;__cov_03fxU3LlPKu8Ytn1FehORw.s['120']++;this.row_list[row_index].error.one('.'+Y.FormManager.status_marker_class).set('innerHTML','');__cov_03fxU3LlPKu8Ytn1FehORw.s['121']++;if(this.row_list[row_index].plugin){__cov_03fxU3LlPKu8Ytn1FehORw.b['18'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['122']++;this.row_list[row_index].plugin.destroy();__cov_03fxU3LlPKu8Ytn1FehORw.s['123']++;this.row_list[row_index].plugin=null;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['18'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['124']++;while(query_row.get('children').size()>2){__cov_03fxU3LlPKu8Ytn1FehORw.s['125']++;var child=query_row.get('children').item(0).next();__cov_03fxU3LlPKu8Ytn1FehORw.s['126']++;child.remove(true);}__cov_03fxU3LlPKu8Ytn1FehORw.s['127']++;var var_menu=this.row_list[row_index].var_menu;__cov_03fxU3LlPKu8Ytn1FehORw.s['128']++;var selected_var=this.var_list[var_menu.get('selectedIndex')];__cov_03fxU3LlPKu8Ytn1FehORw.s['129']++;var cells=[];__cov_03fxU3LlPKu8Ytn1FehORw.s['130']++;if(selected_var.type=='none'){__cov_03fxU3LlPKu8Ytn1FehORw.b['19'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['131']++;query_row.addClass(this.getClassName('empty'));}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['19'][1]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['132']++;query_row.removeClass(this.getClassName('empty'));__cov_03fxU3LlPKu8Ytn1FehORw.s['133']++;this.row_list[row_index].plugin=new QueryBuilder.plugin_mapping[selected_var.type](this,this.get('pluginConfig'));__cov_03fxU3LlPKu8Ytn1FehORw.s['134']++;cells=this.row_list[row_index].plugin.create(row_index,selected_var,this.op_list[selected_var.type],value);}__cov_03fxU3LlPKu8Ytn1FehORw.s['135']++;while(cells.length<this.plugin_column_count){__cov_03fxU3LlPKu8Ytn1FehORw.s['136']++;cells.push(this._createContainer());}__cov_03fxU3LlPKu8Ytn1FehORw.s['137']++;for(var i=0;i<cells.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['138']++;query_row.insertBefore(cells[i],control_cell);}__cov_03fxU3LlPKu8Ytn1FehORw.s['139']++;if(cells.length>this.plugin_column_count){__cov_03fxU3LlPKu8Ytn1FehORw.b['20'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['140']++;var col_span=1+cells.length;__cov_03fxU3LlPKu8Ytn1FehORw.s['141']++;for(var i=0;i<this.row_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['142']++;var row=this.row_list[i].row;__cov_03fxU3LlPKu8Ytn1FehORw.s['143']++;this.row_list[i].error.set('colSpan',col_span);__cov_03fxU3LlPKu8Ytn1FehORw.s['144']++;if(row!=query_row){__cov_03fxU3LlPKu8Ytn1FehORw.b['21'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['145']++;var control=this.row_list[i].control;__cov_03fxU3LlPKu8Ytn1FehORw.s['146']++;for(var j=this.plugin_column_count;j<cells.length;j++){__cov_03fxU3LlPKu8Ytn1FehORw.s['147']++;row.insertBefore(this._createContainer(),control);}}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['21'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['148']++;this.plugin_column_count=cells.length;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['20'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['149']++;var plugin=this.row_list[row_index].plugin;__cov_03fxU3LlPKu8Ytn1FehORw.s['150']++;if((__cov_03fxU3LlPKu8Ytn1FehORw.b['23'][0]++,plugin)&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['23'][1]++,Y.Lang.isFunction(plugin.postCreate))){__cov_03fxU3LlPKu8Ytn1FehORw.b['22'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['151']++;this.row_list[row_index].plugin.postCreate(row_index,selected_var,this.op_list[selected_var.type],value);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['22'][1]++;}},remove:function(row_index){__cov_03fxU3LlPKu8Ytn1FehORw.f['15']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['152']++;if(this.row_list.length<=0){__cov_03fxU3LlPKu8Ytn1FehORw.b['24'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['153']++;return false;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['24'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['154']++;if((__cov_03fxU3LlPKu8Ytn1FehORw.b['26'][0]++,!this._allow_remove_last_row)&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['26'][1]++,this.row_list.length==1)){__cov_03fxU3LlPKu8Ytn1FehORw.b['25'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['155']++;var var_menu=this.row_list[0].var_menu;__cov_03fxU3LlPKu8Ytn1FehORw.s['156']++;var_menu.set('selectedIndex',0);__cov_03fxU3LlPKu8Ytn1FehORw.s['157']++;this.update(0);__cov_03fxU3LlPKu8Ytn1FehORw.s['158']++;this.fire('queryChanged',{remove:true});__cov_03fxU3LlPKu8Ytn1FehORw.s['159']++;return true;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['25'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['160']++;var query_body=this.row_list[row_index].body;__cov_03fxU3LlPKu8Ytn1FehORw.s['161']++;if(query_body===null){__cov_03fxU3LlPKu8Ytn1FehORw.b['27'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['162']++;return false;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['27'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['163']++;if(this.row_list[row_index].plugin){__cov_03fxU3LlPKu8Ytn1FehORw.b['28'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['164']++;this.row_list[row_index].plugin.destroy();}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['28'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['165']++;query_body.remove(true);__cov_03fxU3LlPKu8Ytn1FehORw.s['166']++;this.row_list.splice(row_index,1);__cov_03fxU3LlPKu8Ytn1FehORw.s['167']++;Y.Array.each(this.row_list,function(row,i){__cov_03fxU3LlPKu8Ytn1FehORw.f['16']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['168']++;var var_menu=row.var_menu;__cov_03fxU3LlPKu8Ytn1FehORw.s['169']++;var_menu.setAttribute('name',this.variableName(i));__cov_03fxU3LlPKu8Ytn1FehORw.s['170']++;var selected_var=this.var_list[var_menu.get('selectedIndex')];__cov_03fxU3LlPKu8Ytn1FehORw.s['171']++;if(selected_var.type!='none'){__cov_03fxU3LlPKu8Ytn1FehORw.b['29'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['172']++;row.plugin.updateName(i);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['29'][1]++;}},this);__cov_03fxU3LlPKu8Ytn1FehORw.s['173']++;this.fire('queryChanged',{remove:true});__cov_03fxU3LlPKu8Ytn1FehORw.s['174']++;return true;},validateFields:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['17']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['175']++;this.clearFieldMessages();__cov_03fxU3LlPKu8Ytn1FehORw.s['176']++;var status=true;__cov_03fxU3LlPKu8Ytn1FehORw.s['177']++;Y.Array.each(this.row_list,function(row,i){__cov_03fxU3LlPKu8Ytn1FehORw.f['18']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['178']++;var info;__cov_03fxU3LlPKu8Ytn1FehORw.s['179']++;row.row.all('input').some(function(n){__cov_03fxU3LlPKu8Ytn1FehORw.f['19']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['180']++;info=Y.FormManager.validateFromCSSData(n);__cov_03fxU3LlPKu8Ytn1FehORw.s['181']++;if(info.error){__cov_03fxU3LlPKu8Ytn1FehORw.b['30'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['182']++;this.displayFieldMessage(n,info.error,'error');__cov_03fxU3LlPKu8Ytn1FehORw.s['183']++;status=false;__cov_03fxU3LlPKu8Ytn1FehORw.s['184']++;return true;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['30'][1]++;}},this);__cov_03fxU3LlPKu8Ytn1FehORw.s['185']++;if(((__cov_03fxU3LlPKu8Ytn1FehORw.b['32'][0]++,!info)||(__cov_03fxU3LlPKu8Ytn1FehORw.b['32'][1]++,info.keepGoing))&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['32'][2]++,row.plugin)&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['32'][3]++,Y.Lang.isFunction(row.plugin.validate))){__cov_03fxU3LlPKu8Ytn1FehORw.b['31'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['186']++;status=(__cov_03fxU3LlPKu8Ytn1FehORw.b['33'][0]++,row.plugin.validate())&&(__cov_03fxU3LlPKu8Ytn1FehORw.b['33'][1]++,status);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['31'][1]++;}},this);__cov_03fxU3LlPKu8Ytn1FehORw.s['187']++;return status;},clearFieldMessages:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['20']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['188']++;this.has_messages=false;__cov_03fxU3LlPKu8Ytn1FehORw.s['189']++;this.get('contentBox').all('input').each(function(n){__cov_03fxU3LlPKu8Ytn1FehORw.f['21']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['190']++;Y.FormManager.clearMessage(n);});__cov_03fxU3LlPKu8Ytn1FehORw.s['191']++;this.get('contentBox').all('select').each(function(n){__cov_03fxU3LlPKu8Ytn1FehORw.f['22']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['192']++;Y.FormManager.clearMessage(n);});},displayFieldMessage:function(e,msg,type,scroll){__cov_03fxU3LlPKu8Ytn1FehORw.f['23']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['193']++;if(Y.FormManager.displayMessage(e,msg,type,this.has_messages,scroll)){__cov_03fxU3LlPKu8Ytn1FehORw.b['34'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['194']++;this.has_messages=true;__cov_03fxU3LlPKu8Ytn1FehORw.s['195']++;return true;}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['34'][1]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['196']++;return false;}},getPlugin:function(row_index){__cov_03fxU3LlPKu8Ytn1FehORw.f['24']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['197']++;return this.row_list[row_index].plugin;},toDatabaseQuery:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['25']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['198']++;var result=[];__cov_03fxU3LlPKu8Ytn1FehORw.s['199']++;for(var i=0;i<this.row_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['200']++;var row=this.row_list[i];__cov_03fxU3LlPKu8Ytn1FehORw.s['201']++;var plugin=row.plugin;__cov_03fxU3LlPKu8Ytn1FehORw.s['202']++;if(plugin){__cov_03fxU3LlPKu8Ytn1FehORw.b['35'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['203']++;var list=plugin.toDatabaseQuery();__cov_03fxU3LlPKu8Ytn1FehORw.s['204']++;for(var j=0;j<list.length;j++){__cov_03fxU3LlPKu8Ytn1FehORw.s['205']++;result.push([row.var_menu.get('value')].concat(list[j]));}}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['35'][1]++;}}__cov_03fxU3LlPKu8Ytn1FehORw.s['206']++;return result;},_createContainer:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['26']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['207']++;return Y.Node.create('<td></td>');},_notifyChanged:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['27']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['208']++;this.fire('queryChanged');},variableName:function(i){__cov_03fxU3LlPKu8Ytn1FehORw.f['28']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['209']++;return Y.Lang.sub(this.var_menu_name_pattern,{i:i});},_variablesMenu:function(menu_name){__cov_03fxU3LlPKu8Ytn1FehORw.f['29']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['210']++;var markup='<select name="{n}" class="{f} {c}" />';__cov_03fxU3LlPKu8Ytn1FehORw.s['211']++;return Y.Lang.sub(markup,{n:menu_name,f:Y.FormManager.field_marker_class,c:this.getClassName('field')});},_rowControls:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['30']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['212']++;var markup='<button type="button" class="{cr}">&ndash;</button>'+'<button type="button" class="{ci}">+</button>';__cov_03fxU3LlPKu8Ytn1FehORw.s['213']++;if(!this._controls_markup){__cov_03fxU3LlPKu8Ytn1FehORw.b['36'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['214']++;this._controls_markup=Y.Lang.sub(markup,{ci:this.getClassName('insert'),cr:this.getClassName('remove')});}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['36'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['215']++;return this._controls_markup;}});__cov_03fxU3LlPKu8Ytn1FehORw.s['216']++;Y.QueryBuilder=QueryBuilder;__cov_03fxU3LlPKu8Ytn1FehORw.s['217']++;Y.QueryBuilder.Env={has_bubble_problem:has_bubble_problem};__cov_03fxU3LlPKu8Ytn1FehORw.s['218']++;QueryBuilder.String=function(query_builder,config){__cov_03fxU3LlPKu8Ytn1FehORw.f['31']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['219']++;this.qb=query_builder;__cov_03fxU3LlPKu8Ytn1FehORw.s['220']++;this.op_menu_name_pattern=config.field_prefix+'query_op_{i}';__cov_03fxU3LlPKu8Ytn1FehORw.s['221']++;this.val_input_name_pattern=config.field_prefix+'query_val_{i}';};__cov_03fxU3LlPKu8Ytn1FehORw.s['222']++;QueryBuilder.String.prototype={create:function(query_index,var_config,op_list,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['32']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['223']++;var op_cell=this.qb._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['224']++;op_cell.set('className',this.qb.getClassName('operator'));__cov_03fxU3LlPKu8Ytn1FehORw.s['225']++;op_cell.set('innerHTML',this._operationsMenu(this.operationName(query_index)));__cov_03fxU3LlPKu8Ytn1FehORw.s['226']++;this.op_menu=op_cell.one('select');__cov_03fxU3LlPKu8Ytn1FehORw.s['227']++;var options=Y.Node.getDOMNode(this.op_menu).options;__cov_03fxU3LlPKu8Ytn1FehORw.s['228']++;for(var i=0;i<op_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['229']++;options[i]=new Option(op_list[i].text,op_list[i].value);}__cov_03fxU3LlPKu8Ytn1FehORw.s['230']++;value=(__cov_03fxU3LlPKu8Ytn1FehORw.b['37'][0]++,value)||(__cov_03fxU3LlPKu8Ytn1FehORw.b['37'][1]++,['','']);__cov_03fxU3LlPKu8Ytn1FehORw.s['231']++;if(value[0]){__cov_03fxU3LlPKu8Ytn1FehORw.b['38'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['232']++;this.op_menu.set('value',value[0]);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['38'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['233']++;if(has_bubble_problem){__cov_03fxU3LlPKu8Ytn1FehORw.b['39'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['234']++;this.op_menu.on('change',this.qb._notifyChanged,this.qb);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['39'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['235']++;var value_cell=this.qb._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['236']++;value_cell.set('className',this.qb.getClassName('value'));__cov_03fxU3LlPKu8Ytn1FehORw.s['237']++;value_cell.set('innerHTML',this._valueInput(this.valueName(query_index),var_config.validation));__cov_03fxU3LlPKu8Ytn1FehORw.s['238']++;this.value_input=value_cell.one('input');__cov_03fxU3LlPKu8Ytn1FehORw.s['239']++;this.value_input.set('value',value[1]);__cov_03fxU3LlPKu8Ytn1FehORw.s['240']++;return[op_cell,value_cell];},postCreate:function(query_index,var_config,op_list,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['33']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['241']++;Y.Lang.later(1,this,function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['34']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['242']++;if(this.value_input){__cov_03fxU3LlPKu8Ytn1FehORw.b['40'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['243']++;if(var_config.autocomplete){__cov_03fxU3LlPKu8Ytn1FehORw.b['41'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['244']++;var config=Y.clone(var_config.autocomplete,true);__cov_03fxU3LlPKu8Ytn1FehORw.s['245']++;config.render=Y.one('body');__cov_03fxU3LlPKu8Ytn1FehORw.s['246']++;this.value_input.plug(Y.Plugin.AutoComplete,config);__cov_03fxU3LlPKu8Ytn1FehORw.s['247']++;if(var_config.autocomplete.containerClassName){__cov_03fxU3LlPKu8Ytn1FehORw.b['42'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['248']++;this.value_input.ac.get('boundingBox').addClass(var_config.autocomplete.containerClassName);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['42'][1]++;}}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['41'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['249']++;try{__cov_03fxU3LlPKu8Ytn1FehORw.s['250']++;this.value_input.focus();}catch(e){}}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['40'][1]++;}});},destroy:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['35']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['251']++;if(this.value_input.unplug){__cov_03fxU3LlPKu8Ytn1FehORw.b['43'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['252']++;this.value_input.unplug(Y.Plugin.AutoComplete);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['43'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['253']++;this.op_menu=null;__cov_03fxU3LlPKu8Ytn1FehORw.s['254']++;this.value_input=null;},updateName:function(new_index){__cov_03fxU3LlPKu8Ytn1FehORw.f['36']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['255']++;this.op_menu.setAttribute('name',this.operationName(new_index));__cov_03fxU3LlPKu8Ytn1FehORw.s['256']++;this.value_input.setAttribute('name',this.valueName(new_index));},set:function(query_index,data){__cov_03fxU3LlPKu8Ytn1FehORw.f['37']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['257']++;this.op_menu.set('value',data[this.operationName(query_index)]);__cov_03fxU3LlPKu8Ytn1FehORw.s['258']++;this.value_input.set('value',data[this.valueName(query_index)]);},toDatabaseQuery:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['38']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['259']++;return[[this.op_menu.get('value'),this.value_input.get('value')]];},operationName:function(i){__cov_03fxU3LlPKu8Ytn1FehORw.f['39']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['260']++;return Y.Lang.sub(this.op_menu_name_pattern,{i:i});},valueName:function(i){__cov_03fxU3LlPKu8Ytn1FehORw.f['40']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['261']++;return Y.Lang.sub(this.val_input_name_pattern,{i:i});},_operationsMenu:function(menu_name){__cov_03fxU3LlPKu8Ytn1FehORw.f['41']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['262']++;var markup='<select name="{n}" class="{f} {c}" />';__cov_03fxU3LlPKu8Ytn1FehORw.s['263']++;return Y.Lang.sub(markup,{n:menu_name,f:Y.FormManager.field_marker_class,c:this.qb.getClassName('field')});},_valueInput:function(input_name,validation_class){__cov_03fxU3LlPKu8Ytn1FehORw.f['42']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['264']++;var markup='<input type="text" name="{n}" class="yiv-required {f} {c}"/>';__cov_03fxU3LlPKu8Ytn1FehORw.s['265']++;return Y.Lang.sub(markup,{n:input_name,f:Y.FormManager.field_marker_class,c:validation_class+' '+this.qb.getClassName('field')});}};__cov_03fxU3LlPKu8Ytn1FehORw.s['266']++;QueryBuilder.Select=function(query_builder,config){__cov_03fxU3LlPKu8Ytn1FehORw.f['43']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['267']++;this.qb=query_builder;__cov_03fxU3LlPKu8Ytn1FehORw.s['268']++;this.val_input_name_pattern=config.field_prefix+'query_val_{i}';};__cov_03fxU3LlPKu8Ytn1FehORw.s['269']++;QueryBuilder.Select.prototype={create:function(query_index,var_config,op_list,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['44']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['270']++;var value_cell=this.qb._createContainer();__cov_03fxU3LlPKu8Ytn1FehORw.s['271']++;value_cell.set('className',this.qb.getClassName('value'));__cov_03fxU3LlPKu8Ytn1FehORw.s['272']++;value_cell.set('innerHTML',this._valuesMenu(this.valueName(query_index)));__cov_03fxU3LlPKu8Ytn1FehORw.s['273']++;this.value_menu=value_cell.one('select');__cov_03fxU3LlPKu8Ytn1FehORw.s['274']++;var options=Y.Node.getDOMNode(this.value_menu).options;__cov_03fxU3LlPKu8Ytn1FehORw.s['275']++;var value_list=var_config.value_list;__cov_03fxU3LlPKu8Ytn1FehORw.s['276']++;for(var i=0;i<value_list.length;i++){__cov_03fxU3LlPKu8Ytn1FehORw.s['277']++;options[i]=new Option(value_list[i].text,value_list[i].value);}__cov_03fxU3LlPKu8Ytn1FehORw.s['278']++;if(value){__cov_03fxU3LlPKu8Ytn1FehORw.b['44'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['279']++;this.value_menu.set('value',value);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['44'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['280']++;if(has_bubble_problem){__cov_03fxU3LlPKu8Ytn1FehORw.b['45'][0]++;__cov_03fxU3LlPKu8Ytn1FehORw.s['281']++;this.value_menu.on('change',this.qb._notifyChanged,this.qb);}else{__cov_03fxU3LlPKu8Ytn1FehORw.b['45'][1]++;}__cov_03fxU3LlPKu8Ytn1FehORw.s['282']++;this.db_query_equals=op_list[0];__cov_03fxU3LlPKu8Ytn1FehORw.s['283']++;return[value_cell];},postCreate:function(query_index,var_config,op_list,value){__cov_03fxU3LlPKu8Ytn1FehORw.f['45']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['284']++;try{__cov_03fxU3LlPKu8Ytn1FehORw.s['285']++;this.value_menu.focus();}catch(e){}},destroy:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['46']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['286']++;this.value_menu=null;},updateName:function(new_index){__cov_03fxU3LlPKu8Ytn1FehORw.f['47']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['287']++;this.value_menu.setAttribute('name',this.valueName(new_index));},set:function(query_index,data){__cov_03fxU3LlPKu8Ytn1FehORw.f['48']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['288']++;this.value_menu.set('value',data[this.valueName(query_index)]);},toDatabaseQuery:function(){__cov_03fxU3LlPKu8Ytn1FehORw.f['49']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['289']++;return[[this.db_query_equals,this.value_menu.get('value')]];},valueName:function(i){__cov_03fxU3LlPKu8Ytn1FehORw.f['50']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['290']++;return Y.Lang.sub(this.val_input_name_pattern,{i:i});},_valuesMenu:function(menu_name){__cov_03fxU3LlPKu8Ytn1FehORw.f['51']++;__cov_03fxU3LlPKu8Ytn1FehORw.s['291']++;var markup='<select name="{n}" class="{f} {c}" />';__cov_03fxU3LlPKu8Ytn1FehORw.s['292']++;return Y.Lang.sub(markup,{n:menu_name,f:Y.FormManager.field_marker_class,c:this.qb.getClassName('field')});}};__cov_03fxU3LlPKu8Ytn1FehORw.s['293']++;QueryBuilder.plugin_mapping={string:QueryBuilder.String,number:QueryBuilder.String,select:QueryBuilder.Select};},'gallery-2013.01.16-21-05',{'skinnable':'true','requires':['widget','gallery-formmgr'],'optional':['gallery-scrollintoview','autocomplete']});
